!function(e){var t={};function a(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,i){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(i,r,function(t){return e[t]}.bind(null,r));return i},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=20)}([function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(8));function s(e,t){return new n(e,t)}t.vector=s;class n{constructor(e,t){this.x=e,this.y=t}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get lengthSquared(){return this.x*this.x+this.y*this.y}get unit(){return this.multiply(1/this.length)}get leftNormal(){return new n(-this.y,this.x)}get rightNormal(){return new n(this.y,-this.x)}get angle(){return Math.atan2(this.y,this.x)}get negate(){return new n(-this.x,-this.y)}get values(){return[this.x,this.y]}get half(){return new n(.5*this.x,.5*this.y)}get copy(){return new n(this.x,this.y)}add(e){return new n(this.x+e.x,this.y+e.y)}addXY(e,t){return new n(this.x+e,this.y+t)}addX(e){return new n(this.x+e,this.y)}addY(e){return new n(this.x,this.y+e)}subtract(e){return new n(this.x-e.x,this.y-e.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}multiply(e){return new n(this.x*e,this.y*e)}stretch(e,t){return new n(this.x*e,this.y*t)}divide(e){return new n(this.x/e,this.y/e)}lerp(e,t){return this.multiply(1-t).add(e.multiply(t))}rotated(e){return this.complexProduct(n.polar(e,1))}isRightOf(e){return this.cross(e)>0}normalOnSide(e){return e.isRightOf(this)?this.rightNormal:this.leftNormal}*[Symbol.iterator](){yield this.x,yield this.y}complexProduct(e){let t=this.x*e.x-this.y*e.y,a=this.x*e.y+this.y*e.x;return new n(t,a)}complexQuotient(e){let t=e.lengthSquared,a=this.x*e.x+this.y*e.y,i=this.y*e.x-this.x*e.y;return new n(a/t,i/t)}get complexExponential(){let e=Math.exp(this.x);return new n(e*Math.cos(this.y),e*Math.sin(this.y))}projection(e){return e.multiply(e.dot(this)/e.lengthSquared)}equivalent(e,t=1e-6){return r.default.equalivalent(this.x,e.x,t)&&r.default.equalivalent(this.y,e.y,t)}static polar(e,t){return new n(Math.cos(e)*t,Math.sin(e)*t)}static lissajous(e,t,a,i=1,n=i,l=0,o=0){return s(Math.cos(r.default.TAU*(e+l)/t)*i,Math.sin(r.default.TAU*(e+o)/a)*n)}static random(e){let t=2*Math.random()*Math.PI;return n.polar(t,e)}}t.default=n,n.ZERO=new n(0,0),n.ONE=new n(1,1),n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.DOWN=new n(0,1),n.UP=new n(0,-1)},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i={};function r(e,t){if(i[e])return i[e];let a=t(e);return i[e]=a,a}function s(e,t){return-1==e.indexOf(".")&&(e=e+"."+t),"./assets/"+e}t.getAsset=r,t.getImage=function(e){return r(s("images/"+e,"png"),e=>{let t=new Image;return t.src=e,t})},t.getAudio=function(e){return r(s("audio/"+e,"mp3"),e=>new Audio(e))},t.isFontLoaded=function(e){return document.fonts.check("0px "+e)}},function(e,t,a){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(a(0)),n=a(13),l=r(a(9));t.default=class{constructor(e=s.default.ZERO,t=0,a=0){this.layer=0,this.transform=new l.default,this.width=0,this.height=0,this.position=e,this.width=t,this.height=a}get position(){return this.transform.position}set position(e){this.transform.position=e}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get dimensions(){return s.vector(this.width,this.height)}get center(){return this.position.add(this.dimensions.half)}contains(e){return n.boxContains(this,e)}overlaps(e){return n.boxOverlaps(this,e)}onRender(e,t){}onUpdate(e){}onBuildScene(e){}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(27)),s={PlaneShift:new r.default({onApply(e,t){let a=t.maxHealth,i=t.health;t.maxHealth=e.maxHealth,t.health=e.health,e.maxHealth=a,e.health=i,console.log("You Win")}}),Attack1:new r.default({imageName:"Attack",damage:5}),Attack2:new r.default({imageName:"Attack",damage:10}),Bash:new r.default({imageName:"Attack",damage:20}),Acid:new r.default({imageName:"Acid2",damage:15}),Molotov:new r.default({damage:5,onApply(e){e.heal-=3}}),Poison:new r.default({craftQuanity:2,onApply(e){e.health+=10,e.heal-=5}}),Blood:new r.default({onApply(e,t){e.health-=20,e.damage+=3}}),Pact:new r.default({imageName:"Pact3",onApply(e,t){if(t){let a=t.maxHealth-t.health;e.health-=a,t.health+=Math.floor(a/3),t.maxHealth-=Math.floor(a/3)}}}),Dissect:new r.default({onApply(e,t){t&&e.health<=5&&(t.maxHealth+=10,t.health=t.maxHealth,t.heal-=10),e.health-=5}}),Roids:new r.default({onApply(e,t){e.damage+=10,e.heal-=15}}),Leeches:new r.default({imageName:"Leeches",craftQuanity:2,damage:5,onApply(e,t){t.health+=5}}),Meds:new r.default({imageName:"Meds",craftQuanity:2,onApply(e){e.heal<0?e.heal+=10:e.heal>=0&&(e.heal-=10)}}),Heal1:new r.default({imageName:"Heal",onApply(e){e.health+=5}}),Heal2:new r.default({imageName:"Heal",onApply(e){e.health+=10}}),Chaol:new r.default({imageName:"Heal",onApply(e){let t=Math.floor(50*Math.random());e.health+=t}}),Infusion:new r.default({imageName:"Infusion",onApply(e){e.maxHealth-=5,e.health+=15,e.heal+=3}}),Karma:new r.default({onApply(e){e.health-=5,e.maxHealth+=10}}),Dread:new r.default({craftQuanity:2,onApply(e){e.damage-=4}}),Volatile:new r.default({damage:0,craftQuanity:2,onApply(e){let t=Math.floor(10*Math.random()),a=Math.random()>.5?t:-t;e.health-=a}}),Chaos:new r.default({damage:0,onApply(e){let t=Math.floor(40*Math.random()),a=Math.random()>.5?t:-t;e.health-=a}}),Charma:new r.default({onApply(e){let t=Math.floor(30*Math.random());e.maxHealth+=t}}),Cower:new r.default({onApply(e,t){t.damage+=10,t.health-=3,t.heal+=3}}),PuppyEyes:new r.default({onApply(e,t){t.health+=3,t.heal+=10}}),FireBreath:new r.default({damage:10,onApply(e,t){t.damage+=3,e.heal-=3}}),Smolder:new r.default({onApply(e,t){t.health+=10,t.heal+=5}}),Bite:new r.default({damage:15,onApply(e,t){t.health+=10}}),DamageBuff:new r.default({onApply(e,t){t.damage+=10}}),Fortify:new r.default({onApply(e,t){t.heal+=10}}),MaxHealthBuff:new r.default({onApply(e,t){t.maxHealth+=15}}),HeavyAttack:new r.default({damage:25}),SoulStare:new r.default({onApply(e,t){e.maxHealth-=10,t.maxHealth+=10,t.health+=5}}),LifeSteal:new r.default({damage:10,onApply(e,t){t.health+=10+t.damage}})};for(let e in s){s[e].name=e}t.default=s},function(e,t,a){"use strict";function i(e,t,a,i=1){return new r(e,t,a,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.rgb=function(e,t,a){return new r(e,t,a)},t.rgba=i;class r{constructor(e,t,a,i=1){this.r=e,this.g=t,this.b=a,this.a=i}static parse(e){if("#"==e[0]){let t=e.match(/[0-9a-f]{2,2}/gi).map(e=>parseInt(e,16));return new r(t[0],t[1],t[2],(t[3]||255)/255)}if(-1==e.indexOf("(")){let t=r[e];if(!t)throw new Error("unrecognized color "+e);return t}let t=e.match(/\w+/)[0],a=e.match(/\d+/g).map(e=>parseFloat(e));switch(t){case"rgb":return new r(a[0],a[1],a[2]);case"rgba":return new r(a[0],a[1],a[2],a[3])}}toString(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}}t.default=r,r.aliceblue=r.parse("#f0f8ff"),r.antiquewhite=r.parse("#faebd7"),r.aqua=r.parse("#00ffff"),r.aquamarine=r.parse("#7fffd4"),r.azure=r.parse("#f0ffff"),r.beige=r.parse("#f5f5dc"),r.bisque=r.parse("#ffe4c4"),r.black=r.parse("#000000"),r.blanchedalmond=r.parse("#ffebcd"),r.blue=r.parse("#0000ff"),r.blueviolet=r.parse("#8a2be2"),r.brown=r.parse("#a52a2a"),r.burlywood=r.parse("#deb887"),r.cadetblue=r.parse("#5f9ea0"),r.chartreuse=r.parse("#7fff00"),r.chocolate=r.parse("#d2691e"),r.coral=r.parse("#ff7f50"),r.cornflowerblue=r.parse("#6495ed"),r.cornsilk=r.parse("#fff8dc"),r.crimson=r.parse("#dc143c"),r.cyan=r.parse("#00ffff"),r.darkblue=r.parse("#00008b"),r.darkcyan=r.parse("#008b8b"),r.darkgoldenrod=r.parse("#b8860b"),r.darkgray=r.parse("#a9a9a9"),r.darkgreen=r.parse("#006400"),r.darkgrey=r.parse("#a9a9a9"),r.darkkhaki=r.parse("#bdb76b"),r.darkmagenta=r.parse("#8b008b"),r.darkolivegreen=r.parse("#556b2f"),r.darkorange=r.parse("#ff8c00"),r.darkorchid=r.parse("#9932cc"),r.darkred=r.parse("#8b0000"),r.darksalmon=r.parse("#e9967a"),r.darkseagreen=r.parse("#8fbc8f"),r.darkslateblue=r.parse("#483d8b"),r.darkslategray=r.parse("#2f4f4f"),r.darkslategrey=r.parse("#2f4f4f"),r.darkturquoise=r.parse("#00ced1"),r.darkviolet=r.parse("#9400d3"),r.deeppink=r.parse("#ff1493"),r.deepskyblue=r.parse("#00bfff"),r.dimgray=r.parse("#696969"),r.dimgrey=r.parse("#696969"),r.dodgerblue=r.parse("#1e90ff"),r.firebrick=r.parse("#b22222"),r.floralwhite=r.parse("#fffaf0"),r.forestgreen=r.parse("#228b22"),r.fuchsia=r.parse("#ff00ff"),r.gainsboro=r.parse("#dcdcdc"),r.ghostwhite=r.parse("#f8f8ff"),r.goldenrod=r.parse("#daa520"),r.gold=r.parse("#ffd700"),r.gray=r.parse("#808080"),r.green=r.parse("#008000"),r.greenyellow=r.parse("#adff2f"),r.grey=r.parse("#808080"),r.honeydew=r.parse("#f0fff0"),r.hotpink=r.parse("#ff69b4"),r.indianred=r.parse("#cd5c5c"),r.indigo=r.parse("#4b0082"),r.ivory=r.parse("#fffff0"),r.khaki=r.parse("#f0e68c"),r.lavenderblush=r.parse("#fff0f5"),r.lavender=r.parse("#e6e6fa"),r.lawngreen=r.parse("#7cfc00"),r.lemonchiffon=r.parse("#fffacd"),r.lightblue=r.parse("#add8e6"),r.lightcoral=r.parse("#f08080"),r.lightcyan=r.parse("#e0ffff"),r.lightgoldenrodyellow=r.parse("#fafad2"),r.lightgray=r.parse("#d3d3d3"),r.lightgreen=r.parse("#90ee90"),r.lightgrey=r.parse("#d3d3d3"),r.lightpink=r.parse("#ffb6c1"),r.lightsalmon=r.parse("#ffa07a"),r.lightseagreen=r.parse("#20b2aa"),r.lightskyblue=r.parse("#87cefa"),r.lightslategray=r.parse("#778899"),r.lightslategrey=r.parse("#778899"),r.lightsteelblue=r.parse("#b0c4de"),r.lightyellow=r.parse("#ffffe0"),r.lime=r.parse("#00ff00"),r.limegreen=r.parse("#32cd32"),r.linen=r.parse("#faf0e6"),r.magenta=r.parse("#ff00ff"),r.maroon=r.parse("#800000"),r.mediumaquamarine=r.parse("#66cdaa"),r.mediumblue=r.parse("#0000cd"),r.mediumorchid=r.parse("#ba55d3"),r.mediumpurple=r.parse("#9370db"),r.mediumseagreen=r.parse("#3cb371"),r.mediumslateblue=r.parse("#7b68ee"),r.mediumspringgreen=r.parse("#00fa9a"),r.mediumturquoise=r.parse("#48d1cc"),r.mediumvioletred=r.parse("#c71585"),r.midnightblue=r.parse("#191970"),r.mintcream=r.parse("#f5fffa"),r.mistyrose=r.parse("#ffe4e1"),r.moccasin=r.parse("#ffe4b5"),r.navajowhite=r.parse("#ffdead"),r.navy=r.parse("#000080"),r.oldlace=r.parse("#fdf5e6"),r.olive=r.parse("#808000"),r.olivedrab=r.parse("#6b8e23"),r.orange=r.parse("#ffa500"),r.orangered=r.parse("#ff4500"),r.orchid=r.parse("#da70d6"),r.palegoldenrod=r.parse("#eee8aa"),r.palegreen=r.parse("#98fb98"),r.paleturquoise=r.parse("#afeeee"),r.palevioletred=r.parse("#db7093"),r.papayawhip=r.parse("#ffefd5"),r.peachpuff=r.parse("#ffdab9"),r.peru=r.parse("#cd853f"),r.pink=r.parse("#ffc0cb"),r.plum=r.parse("#dda0dd"),r.powderblue=r.parse("#b0e0e6"),r.purple=r.parse("#800080"),r.rebeccapurple=r.parse("#663399"),r.red=r.parse("#ff0000"),r.rosybrown=r.parse("#bc8f8f"),r.royalblue=r.parse("#4169e1"),r.saddlebrown=r.parse("#8b4513"),r.salmon=r.parse("#fa8072"),r.sandybrown=r.parse("#f4a460"),r.seagreen=r.parse("#2e8b57"),r.seashell=r.parse("#fff5ee"),r.sienna=r.parse("#a0522d"),r.silver=r.parse("#c0c0c0"),r.skyblue=r.parse("#87ceeb"),r.slateblue=r.parse("#6a5acd"),r.slategray=r.parse("#708090"),r.slategrey=r.parse("#708090"),r.snow=r.parse("#fffafa"),r.springgreen=r.parse("#00ff7f"),r.steelblue=r.parse("#4682b4"),r.tan=r.parse("#d2b48c"),r.teal=r.parse("#008080"),r.thistle=r.parse("#d8bfd8"),r.tomato=r.parse("#ff6347"),r.turquoise=r.parse("#40e0d0"),r.violet=r.parse("#ee82ee"),r.wheat=r.parse("#f5deb3"),r.white=r.parse("#ffffff"),r.whitesmoke=r.parse("#f5f5f5"),r.yellow=r.parse("#ffff00"),r.yellowgreen=r.parse("#9acd32"),r.transparent=i(0,0,0,0)},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=a(1),n=i(a(2)),l=i(a(14)),o=r(a(0)),h=i(a(7)),u=i(a(15)),d=a(10);class c extends n.default{constructor(e,t){super(e,c.dimensions.x,c.dimensions.y),this.grabOffset=o.default.ZERO,this.dealDelay=0,this.position=e.copy,this.type=t}get inHand(){return this.deck&&this.deck.isHand}get isPreview(){return!this.deck}get grabbed(){return h.default.instance.grabbing==this}apply(e,t,a,i){this.type.apply(e,i),t.remove(this);let r=0==a.length?0:Math.floor(Math.random()*a.length);a.insertAt(this,r)}onUpdate(e){let{deck:t}=this;if(t&&0==this.dealDelay){let e=t.cardPosition(this);if(e.subtract(this.position).length>1){let t=e.subtract(this.position);this.position=this.position.add(t.unit.multiply(t.length/10))}}if(1==this.dealDelay&&d.playSound(c.randomFlipSound(),{volume:1/8}),this.dealDelay=Math.max(0,this.dealDelay-1),!this.inHand)return;let a=h.default.instance,{buttons:i}=l.default,r=e.mousePosition;i.Mouse0?this.contains(r)&&!a.grabbing&&(a.grabbing=this,this.grabOffset=this.position.subtract(r)):this.grabbed&&this.onDrop(e),this.grabbed&&(this.position=r.add(this.grabOffset))}onDrop(e){h.default.instance.grabbing=void 0;let{hand:t,discard:a,pawns:i,player:r,enemy:s}=h.default.instance;for(let e of i)if(e.overlaps(this))if(e==r)this.apply(r,t,a,r);else if(e!==r&&(this.apply(e,t,a,r),r.animator)){let e="glassBreak_"+Math.floor(3*Math.random()).toString()+".wav";setTimeout(()=>d.playSound(e,{volume:.09}),600),r.animator.play(900)}let n=e.objectsInBox(this,e=>e instanceof u.default)[0];n&&(n.melt(this),t.remove(this))}onRender(e){let{type:t,inHand:a,isPreview:i}=this;i||a?(e.scale(.5,.5),e.vimage(t.image,o.default.ZERO)):e.vimage(s.getImage("cards/Blank"),o.default.ZERO)}static randomFlipSound(){return"cardflip_"+Math.floor(4*Math.random())+".wav"}}t.default=c,c.dimensions=o.vector(68,108),c.upperSectionHeight=80},function(e,t,a){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(0));t.default=class{constructor(e){this.image=e}get dimensions(){return this._dimensions||r.vector(this.image.width,this.image.height)}get position(){return r.default.ZERO}get center(){return this._center||this.dimensions.half}setDimensions(e){return this._dimensions=e,this}setSource(e){return this.source=e,this}setCenter(e){return this._center=e,this}draw(e,t=0,a=0,i=!1){let{image:r,source:s,dimensions:n}=this,{x:l,y:o}=n;if(i){let e=this.center;t-=e.x,a-=e.y}s?e.imageSource(s.x,s.y,s.w,s.h).partialImage(this.image,t,a,l,o):e.image(r,t,a,l,o)}vdraw(e,t,a=!1){this.draw(e,t.x,t.y)}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(a(11)),n=i(a(12)),l=i(a(16)),o=i(a(5)),h=i(a(15)),u=i(a(3)),d=a(10),c=a(1),f=i(a(9)),p=r(a(0)),m=i(a(8)),g=a(4),y=i(a(29)),x=a(30),w=i(a(31)),b=i(a(17)),v=a(32),_=i(a(18)),M=i(a(33)),P=i(a(34)),k=i(a(35));class S{constructor(){this.win=!1,this.handCap=5,this.enemyCount=0,this.backgroundColor=g.rgb(0,0,255),this.deck=new n.default(10,1/0,30,250,-1,1,!1),this.hand=new n.default(this.handCap,this.handCap,145,250,90,0,!0),this.discard=new n.default(0,1/0,600,250,1,1,!1),this.background=new w.default,this.table=new P.default(330,210,515,600),this.melter=new h.default(275,350),this.ledger=new M.default(180,370),this.manual=new k.default(480,370),this.enemy=v.getEnemy(0),this.player=new l.default(p.vector(100,80),60,new _.default(new b.default({image:c.getImage("PawnEgor"),center:p.vector(18,38),frameWidth:90,scale:2.4}))),this.ambience=d.audioInstance(c.getAudio("DungeonAmbience"),{volume:.025}),this.tunes=d.audioInstance(c.getAudio("SomberTune.wav"),{volume:.75}),this.endingTurn=!1,S.instance=this,this.canvas=new s.default("canvas"),this.player.main=!0,this.player.heal=0,this.player.damage=0,addEventListener("keyup",e=>this.keyup(e))}get pawns(){return[this.player,this.enemy]}keyup(e){"Enter"==e.key&&this.tryEndTurn(),"e"==e.key&&this.player.animator.play(1e3)}get canEndTurn(){let{deck:e,hand:t,endingTurn:a}=this;return!a&&0==t.length&&e.length>0&&this.player.health>0}tryEndTurn(){if(!this.canEndTurn)return;this.endingTurn=!0;let{enemy:e,player:t,melter:a,deck:i}=this;e.onEndTurn(),e.UseHand(t,e),t.onEndTurn(),e.health>0?d.playSound("slap.wav",{volume:.1}):(this.enemyCount+=1,11==this.enemyCount?(console.log("You Win"),this.win=!0):this.enemy=v.getEnemy(this.enemyCount)),e.animator&&e.animator.play(1e3),t.health<=0?window.setTimeout(()=>{location.reload()},5e3):this.refillHand();for(let e of a.products)i.cards.push(e);a.base=new o.default(a.position,u.default.Volatile),a.ingredients=[],this.endingTurn=!1}refillHand(){let{deck:e,hand:t,discard:a,handCap:i}=this,r=6;for(;t.length<i&&(e.length>0||a.length>0);)if(0==e.length)for(;a.length>0;)a.transferCard(e,5*r++);else e.transferCard(t,5*r++)}update(){let{canvas:e,deck:t,hand:a,discard:i,enemy:r,player:s,melter:n,background:l}=this,o=new y.default(e,this.cameraTransform(),[s,r,t,a,i,this.table,n,l,this.ledger,this.manual]);this.render(o),o.update(),this.canEndTurn&&x.scheduleTask("endTurn",1e3,()=>this.tryEndTurn());this.backgroundColor.b>100?(this.backgroundColor.b-=10,this.backgroundColor.r-=10):(this.backgroundColor.b+=.1,this.backgroundColor.r+=.1),this.ambience.paused&&d.playAudio(this.ambience),this.tunes.paused&&d.playAudio(this.tunes)}cameraTransform(){let{canvas:e}=this,t=m.default.soften(this.player.dizzyTime/4,20),a=m.default.lerp(1,Math.cos(t/4),.1),i=new f.default(e.center,Math.sin(t/13)*m.default.TAU/8,new p.default(1/a,1/a),e.center,new f.default(e.center,0,new p.default(1,1/Math.cos(.1*t)),e.center));let r=this.player.damageTime,s=Math.sqrt(r),n=p.default.lissajous(20*r,7,13,s),l=Math.sin(r)*s*.001;return new f.default(e.center.add(n),l,p.default.ONE,e.center,i)}render(e){let{canvas:t}=this;if(t.resize(700,500,2),t.smooth(!1),t.background(this.backgroundColor),e.cameraTransform=this.cameraTransform(),e.render(),this.player.damageTime>0&&t.background(g.rgba(255,0,0,Math.sqrt(this.player.damageTime/160))),this.player.health<=0){t.fillStyle(g.rgb(100,0,0));let e=700,a=t.dimensions.half.addXY(-e/2,-30);t.text("YOU DIED ON LEVEL "+this.enemyCount,a.x,a.y,e,"250px pixel")}if(this.win){t.fillStyle(g.rgb(0,0,100));let e=700,a=t.dimensions.half.addX(-e/2);t.text("YOU WIN",a.x,a.y,e,"400px pixel")}}}t.default=S},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class i{static modulus(e,t){return(e%t+t)%t}static lerp(e,t,a){return e*(1-a)+t*a}static clamp(e,t,a){return e<t?t:e>a?a:e}static shortestRotation(e,t){let a=i.modulus(t-e,i.TAU);return a>Math.PI&&(a-=i.TAU),a}static angleLerp(e,t,a){return e+i.shortestRotation(e,t)*a}static sigmoid(e){let t=Math.exp(e);return t/(t+1)}static soften(e,t=1){return function(e){return e>1?e-.5:e*e/2}(Math.abs(e)/t)*t*Math.sign(e)}static equalivalent(e,t,a=1e-6){return Math.abs(e-t)<=a}}t.default=i,i.TAU=2*Math.PI,i.degreesToRadians=i.TAU/360},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(0)),s=i(a(26));t.default=class{constructor(e=new r.default(0,0),t=0,a=new r.default(1,1),i=new r.default(0,0),s){this.position=e,this.rotation=t,this.scale=a,this.center=i,this.parent=s}get localMatrix(){return s.default.translation(this.position.x,this.position.y).multiplyMatrix(s.default.rotation(this.rotation)).multiplyMatrix(s.default.scale(this.scale.x,this.scale.y)).multiplyMatrix(s.default.translation(-this.center.x,-this.center.y))}get localInverseMatrix(){return s.default.translation(this.center.x,this.center.y).multiplyMatrix(s.default.scale(1/this.scale.x,1/this.scale.y)).multiplyMatrix(s.default.rotation(-this.rotation)).multiplyMatrix(s.default.translation(-this.position.x,-this.position.y))}get matrix(){let e=this.localMatrix;return this.parent?this.parent.matrix.multiplyMatrix(e):e}get inverseMatrix(){let e=this.localInverseMatrix;return this.parent?e.multiplyMatrix(this.parent.inverseMatrix):e}transformVector(e){return this.matrix.multiplyVector(e)}transformPoint(e){return this.matrix.multiplyPoint(e)}inverseTransformVector(e){return this.inverseMatrix.multiplyVector(e)}inverseTransformPoint(e){return this.inverseMatrix.multiplyPoint(e)}vectorToWorld(e){return this.transformVector(e)}pointToWorld(e){return this.transformPoint(e)}vectorToLocal(e){return this.inverseTransformVector(e)}pointToLocal(e){return this.inverseTransformPoint(e)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(1);function r(e,t={}){let a=e.cloneNode();return Object.assign(a,t),a}function s(e){e.play().catch(e=>{})}t.audioInstance=r,t.playAudio=s,t.playSound=function(e,t){s(r(i.getAudio(e),t))}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(0)),s=i(a(4)),n=a(21);function l(e){return e instanceof s.default?e.toString():e}t.default=class{constructor(e){if(this.pixelDensity=1,this._imageSource={x:0,y:0,w:0,h:0},"string"==typeof e){let t=document.getElementById(e);if(!(t instanceof HTMLCanvasElement))throw new Error("No canvas with id: "+e+" found.");e=t}this.canvas=e,this.context=this.canvas.getContext("2d"),this.width=e.width,this.height=e.height}get dimensions(){return new r.default(this.width,this.height)}get center(){return this.dimensions.half}resize(e,t,a=1){return this.width=e,this.height=t,this.canvas instanceof HTMLCanvasElement&&(this.canvas.style.width=e+"px",this.canvas.style.height=t+"px"),this.canvas.width=e*a,this.canvas.height=t*a,this.pixelDensity=a,this.scale(a,a),this}fitWindow(e=1){return this.resize(innerWidth,innerHeight,e),this}background(e){let{canvas:t,context:a,width:i,height:r}=this;return a.fillStyle=l(e),a.fillRect(0,0,i,r),this}clear(){return this.context.clearRect(0,0,this.width,this.height),this}reset(){this.context.resetTransform(),this.scale(this.pixelDensity,this.pixelDensity),this.clear()}vline(e,t){return this.line(e.x,e.y,t.x,t.y),this}line(e,t,a,i){let{context:r}=this;return r.beginPath(),r.moveTo(e,t),r.lineTo(a,i),r.closePath(),this}vrect(e,t,a=!1){return this.rect(e.x,e.y,t.x,t.y,a),this}rect(e,t,a,i,r=!1){let{context:s}=this;return r&&(e-=a/2,t-=i/2),s.beginPath(),s.rect(e,t,a,i),s.closePath(),this}vcircle(e,t){return this.circle(e.x,e.y,t),this}circle(e,t,a){let{context:i}=this;return i.beginPath(),i.ellipse(e,t,a,a,0,0,2*Math.PI),i.closePath(),this}stroke(){return this.context.stroke(),this}fill(){return this.context.fill(),this}strokeStyle(e){return this.context.strokeStyle=e.toString(),this}fillStyle(e){return this.context.fillStyle=l(e),this}lineWidth(e){return this.context.lineWidth=e,this}alpha(e){return this.context.globalAlpha=e,this}composition(e){return this.context.globalCompositeOperation=e,this}shadow(e,t="black"){return this.context.shadowBlur=e,this.context.shadowColor=t.toString(),this}smooth(e){return this.context.imageSmoothingEnabled=e,this}filter(e){if("string"==typeof e)this.context.filter=e;else if(null==e)this.context.filter="none";else{let t=Object.entries(e).map(([e,t])=>{"object"==typeof t&&(t=Object.values(Object).map(e=>e.toString()).join(", "));let a="hueRotate"==e?"turn":"";return n.camelToDashes(e)+"("+t+a+")"}).join(" ");this.context.filter=t}return this}vimage(e,t,a=r.default.ZERO,i=!1){return this.image(e,t.x,t.y,a.x,a.y,i),this}image(e,t=0,a=0,i=0,r=0,s=!1){return 0==e.width?this:(s?(t-=(i=e.width)/2,a-=(r=e.height)/2):(i=i||e.width,r=r||e.height),this.context.drawImage(e,t,a,i,r),this)}vpartialImage(e,t,a){return this.partialImage(e,t.x,t.y,a.x,a.y),this}partialImage(e,t,a,i,r){let{_imageSource:s}=this;i=i||s.w,r=r||s.h,this.context.drawImage(e,s.x,s.y,s.w,s.h,t,a,i,r)}vimageSource(e,t){return this.imageSource(e.x,e.y,t.x,t.y),this}imageSource(e,t,a,i){return this._imageSource={x:e,y:t,w:a,h:i},this}vtranslate(e){return this.translate(e.x,e.y),this}translate(e,t){return this.context.translate(e,t),this}translateToCenter(){return this.vtranslate(this.dimensions.half),this}rotate(e){return this.context.rotate(e),this}vscale(e){return this.scale(e.x,e.y),this}scale(e,t){return this.context.scale(e,t),this}transform(e){let{x:t,y:a}=e.position,{x:i,y:r}=e.scale,{x:s,y:n}=e.center;return e.parent&&this.transform(e.parent),this.translate(t,a).rotate(e.rotation).scale(i,r).translate(-s,-n),this}inverseTransform(e){let{x:t,y:a}=e.position,{x:i,y:r}=e.scale,{x:s,y:n}=e.center;return this.translate(s,n).scale(1/i,1/r).rotate(-e.rotation).translate(-t,-a),e.parent&&this.inverseTransform(e.parent),this}vtext(e,t,a,i="50px pixel"){return this.text(e,t.x,t.y,a,i),this}text(e,t,a,i,r="50px pixel"){let s=this.context;return s.font=r,s.fillText(e,t,a,i),this}push(){return this.context.save(),this}pop(){return this.context.restore(),this}path(e){this.context.beginPath();for(let t=0;t<e.length;t+=2){let a=e[t],i=e[t+1];0==t?this.context.moveTo(a,i):this.context.lineTo(a,i)}return this}vpath(e){this.context.beginPath();let t=0;for(let a of e)0==t++?this.context.moveTo(a.x,a.y):this.context.lineTo(a.x,a.y);return this}gradient(e,t,a){let i=this.context.createLinearGradient(e.x,e.y,t.x,t.y);for(let[e,t]of a)i.addColorStop(e,t.toString());return i}}},function(e,t,a){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(a(0)),n=r(a(5)),l=r(a(2)),o=r(a(3)),h=a(1);t.default=class extends l.default{constructor(e,t,a,i,r,l,h,u){super(s.vector(a,i),0,0),this.types=[o.default.Attack1,o.default.Heal1],this.capacity=t,this.spread=s.vector(r,l),this.isHand=h,u&&(this.types=u);let d=[];for(let t=0;t<e;t++){let e=s.vector(a+r*t,i+l*t),o=this.types[Math.floor(Math.random()*this.types.length)],h=new n.default(e,o);d.push(h)}this.cards=d,this.layer=10}get length(){return this.cards.length}remove(e){let t=this.cards.indexOf(e);this.cards.splice(t,1)}insertAt(e,t){if(0==this.length)return void this.cards.push(e);let a=this.cards[t];this.cards[t]=e,this.cards.push(a)}insertAtRandom(e){let t=Math.floor(Math.random()*this.length);this.insertAt(e,t)}transferCard(e,t=1){let a=this.cards.pop();a&&(a.dealDelay=t,e.cards.push(a))}cardPosition(e){let t=this.cards.indexOf(e);return this.position.add(this.spread.multiply(t))}onRender(e){if(!this.isHand&&this.length>=0){let t=this.cards[this.length-1];if(!t)return;e.vimage(h.getImage("cards/Blank"),s.default.ZERO,t.dimensions),e.fillStyle("#a39081").text(this.length.toString(),0,t.height/2,t.width,"30px pixel")}}onBuildScene(e){let t=0,a=this.isHand?1:-1;for(let i of this.cards)i.deck=this,i.layer=t++*a,i.grabbed&&(i.layer=100),e.add(i)}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(0)),s=i(a(23)),n=i(a(25)),l=e=>e.position.x,o=e=>e.position.x+e.dimensions.x,h=e=>e.position.y,u=e=>e.position.y+e.dimensions.y;function d(e,t,a){return a>Math.min(e,t)&&a<Math.max(e,t)}function c(e,t,a,i){return d(e,t,a)||d(e,t,i)}t.boxContains=function(e,t){let a=d(l(e),o(e),t.x),i=d(h(e),u(e),t.y);return a&&i},t.boxOverlaps=function(e,t){let a=c(l(e),o(e),l(t),o(t)),i=c(h(e),u(e),h(t),u(t));return a&&i},t.contains=d,t.overlaps=c,t.collisionInfo=function(e,t){let a=t.velocity.subtract(e.velocity),i=new n.default(r.default.ZERO,a),l=s.default(a=>e.support(a).subtract(t.support(a.negate)),a);if(null==l)return null;let o=l.rayCast(i);if(o<=0)return null;let h=l.leftNormal.unit,u=r.default.polar(.1,1),d=h.complexProduct(u),c=h.complexQuotient(u);return{time:o,normal:h,contact:{a:{high:e.support(d),low:e.support(c)},b:{high:t.support(d.negate),low:t.support(c.negate)}}}}},function(e,t,a){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=i(a(0)),n=r(a(11));window.addEventListener("mousemove",e=>{l.mouse=s.vector(e.x,e.y)}),window.addEventListener("keydown",e=>l.buttons[e.key]=!0),window.addEventListener("keyup",e=>l.buttons[e.key]=!1),window.addEventListener("mousedown",e=>l.buttons["Mouse"+e.button]=!0),window.addEventListener("mouseup",e=>l.buttons["Mouse"+e.button]=!1);class l{static mouseScreenPosition(e){e instanceof n.default&&(e=e.canvas);let t=e.getBoundingClientRect();return l.mouse.addXY(-t.left,-t.top)}}t.default=l,l.mouse=s.default.ZERO,l.buttons={}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=a(1),n=i(a(2)),l=i(a(6)),o=r(a(0)),h=i(a(5)),u=i(a(3)),d=i(a(28)),c=i(a(9)),f=i(a(7)),p=i(a(8)),m=i(a(4)),g=a(10);t.default=class extends n.default{constructor(e,t){super(o.vector(e,t),69,100),this.preview=0,this.layer=50,this.ingredients=[],this.multiplier=1,this.base=new h.default(this.position,u.default.Volatile),this.sprite=new l.default(s.getImage("Melter")).setSource({x:0,y:0,w:100,h:100}).setDimensions(o.vector(110,100))}get products(){let e=d.default.getProduct(this.ingredients),t=[];for(let a=0;a<this.multiplier*e.craftQuantity;a++)t.push(new h.default(this.base.position,e));return t}get potentialProduct(){let e=f.default.instance;if(!e.grabbing)return;let t=this.ingredients.slice();t.push(e.grabbing.type);let a=d.default.getProduct(t);return new h.default(this.base.position,a)}melt(e){this.ingredients.push(e.type),g.playSound("bubble.wav",{volume:.5})}drawProduct(e,t,a){e.push(),e.alpha(.8*this.preview);let i=performance.now(),r=.1*Math.sin(i/400),s=o.default.lissajous(.002*i,7,13,10);e.transform(new c.default(this.dimensions.half.addY(-150).add(s),r,o.default.ONE,a.dimensions.half.addY(20))).shadow(40,m.default.cornflowerblue),a.onRender(e),e.pop()}onRender(e,t){let{sprite:a}=this,i=t.mousePosition,r=0;this.contains(i)&&(r=1),this.preview=p.default.lerp(this.preview,r,.1),this.products.forEach(a=>{this.drawProduct(e,t,this.potentialProduct||a)});let s=o.vector(32,45);a.draw(e,s.x,s.y,!0)}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const s=i(a(2)),n=r(a(0)),l=i(a(8)),o=i(a(4)),h=i(a(12)),u=i(a(5)),d=i(a(3));t.default=class extends s.default{constructor(e,t,a,i,r){super(e,100,140),this.dizzyTime=0,this.dizziness=0,this.recentDamage=0,this.damageTime=0,this.pHealth=10,this.damage=10,this.deck=new h.default(0,0,0,0,10,0,!1),this.hand=new u.default(new n.default(0,0),d.default.Heal1),this.layer=-50,this.maxHealth=t,this.pHealth=t,this.damage=r,this.heal=2,this.main=!1,this.animator=a,i&&(this.hand=new u.default(new n.default(0,0),i[0]),this.deck=new h.default(i.length,0,this.position.x,this.position.y,0,0,!1,i),i.forEach(e=>{this.deck.insertAtRandom(new u.default(this.position,e))}))}get randomCard(){let e=Math.floor(Math.random()*this.deck.length);console.log("deck:",this.deck),console.log("index:",e);let t=this.deck.cards[e];return console.log("Card:",t.type),t}setNewHand(){this.hand=this.randomCard}get health(){return this.pHealth}set health(e){let t=e-this.pHealth;this.pHealth=l.default.clamp(e,0,this.maxHealth),t<0&&this.onDamage(-t)}onDamage(e){this.recentDamage+=e,this.recentDamage=Math.min(this.maxHealth-this.health,this.recentDamage),this.damageTime+=2*e}onUpdate(){this.recentDamage=Math.max(0,this.recentDamage-.15),this.damageTime=Math.max(0,this.damageTime-1),this.dizzyTime=Math.max(0,this.dizzyTime-1),this.health>this.maxHealth&&(this.health=this.maxHealth),0==this.dizzyTime&&(this.dizziness=0)}statDecay(){0!=this.damage&&(this.damage-=Math.sign(this.damage)),0!==this.heal&&(this.heal+=-1*Math.sign(this.heal))}UseHand(e,t){!this.main&&this.health>0&&(this.hand.type.apply(e,t),this.setNewHand())}onEndTurn(){this.health>0&&(this.health+=this.heal),this.statDecay()}onRender(e,t){if(e.vtranslate(n.default.lissajous(10*this.damageTime,7,13,Math.sqrt(this.damageTime))),this.animator){let{width:t,height:a}=this;e.push().translate(t/2,a/2),this.animator.onRender(e),e.pop()}else this.drawBasic(e);this.drawHealthBar(e),this.drawIntent(e)}drawBasic(e){e.vrect(n.default.ZERO,this.dimensions).fillStyle(o.default.magenta).fill()}drawHealthBar(e){let t=this.width/this.maxHealth,a=this.health*t,i=n.vector(0,this.height),r=i.addXY(a/3-15,18),s=this.recentDamage*t;e.vrect(i,n.vector(this.width,20)).fillStyle(o.default.black).fill(),e.vrect(i,n.vector(a,20)).fillStyle(o.default.red).fill(),e.vrect(i.addX(a),n.vector(s,20)).fillStyle(o.default.orange).fill(),e.fillStyle("white").text(this.health+"/"+this.maxHealth,r.x,r.y,60,"20px pixel")}drawIntent(e){let t=this.main?-100:100;e.fillStyle("red").text("Str:"+this.damage,t,25,80,"25px pixel"),this.health>0&&e.fillStyle("green").text("Res:"+this.heal,t,45,80,"25px pixel"),this.main||e.fillStyle("rgb(200, 0, 200)").text(this.hand.type.name,0,-30,100,"25px pixel")}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(6)),s=a(0);t.default=class{constructor(e){this.scale=1,this.image=e.image,this.frameWidth=e.frameWidth,this.scale=e.scale||this.scale,this._center=e.center||this._center}setScale(e){return this.scale=e,this}setCenter(e){return this._center=e,this}get center(){return this._center?this._center.multiply(this.scale):this.spriteDimensions.half}get frameCount(){return Math.floor(this.image.width/this.frameWidth)}frame(e){return e%=this.frameCount,new r.default(this.image).setSource({x:this.frameWidth*e,y:0,w:this.frameWidth,h:this.image.height}).setDimensions(this.spriteDimensions).setCenter(this.center)}frameAtPercent(e){return this.frame(Math.floor(e*this.frameCount))}get frameDimensions(){return s.vector(this.frameWidth,this.image.height)}get spriteDimensions(){return this.frameDimensions.multiply(this.scale)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(19);t.default=class{constructor(e,t=i.GameClock){this.sheet=e,this.clock=t}getPercent(e){return(e-this.startTime)/this.playTime}getSprite(e){let{startTime:t,playTime:a,sheet:i}=this;return t&&e<t+a?i.frameAtPercent(this.getPercent(e)):(this.stop(),i.frame(0))}play(e){this.startTime=this.clock.time,this.playTime=e}stop(){this.playTime=void 0,this.startTime=void 0}onRender(e){this.getSprite(this.clock.time).draw(e,0,0,!0)}get playing(){return null==this.playTime}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=50;class r{constructor(){this.lastTick=performance.now(),this.paused=!1,this._time=0,this._dt=0}get time(){return this._time}get dt(){return this._dt}tick(){let e=performance.now(),t=e-this.lastTick,a=Math.min(t,i);this.lastTick=e,this.paused||(this._dt=a,this._time+=a)}pause(){this.paused=!0}unpause(){this.paused=!1}}t.default=r,t.GameClock=new r,window.GameClock=t.GameClock},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(7));a(36).startGameLoop(r.default)},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(22));function s(e){return e.match(/[A-Za-z_][a-z0-9_]+/g)}t.frozen=function(e){return Object.freeze(e)},t.renameField=function(e,t,a){e.hasOwnProperty(t)&&(e[a]=e[t],delete e[t])},t.splitCamel=s,t.camelToDashes=function(e){return(s(e)||[]).join("-").toLowerCase()},t.memoize=function(e){let t={};return a=>{let i=t[a];if(void 0!==i)return i;let r=e(a);return t[a]=r,r}},t.fitBox=function(e,t){let a=t.dimensions.x/e.dimensions.x,i=t.dimensions.y/e.dimensions.y,s=Math.min(a,i),n=e.dimensions.multiply(s),l=t.dimensions.subtract(n).half;return new r.default(n,t.position.add(l))},t.argmax=function(e,t){let a=t(e[0]),i=0;for(let r=0;r<e.length;r++){let s=t(e[r]);s>a&&(a=s,i=r)}return{best:a,bestIndex:i,bestArg:e[i]}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(0));t.default=class{constructor(e,t=r.default.ZERO){this.dimensions=e,this.position=t}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(24));t.default=function(e,t,a=100){let i=e(t.rightNormal),s=e(t.leftNormal);if(i.dot(t.rightNormal)<0)return null;if(s.dot(t.leftNormal)<0)return null;let n=0;for(;;){let l=s.subtract(i),o=i.negate,h=e(l.normalOnSide(o));if(++n==a||h.equivalent(i)||h.equivalent(s))return new r.default(i,s);h.dot(t.rightNormal)>0?i=h:s=h}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.a=e,this.b=t}get heading(){return this.b.subtract(this.a)}get leftNormal(){return this.heading.leftNormal}rayCast(e){let{a:t,b:a}=this,i=t.subtract(e.point),r=a.subtract(t).leftNormal;return i.dot(r)/e.heading.dot(r)}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e,t){this.point=e,this.heading=t}pointAt(e){return this.point.add(this.heading.multiply(e))}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(0));class s{constructor(e=0,t=0,a=0,i=0,r=0,s=0){this.xx=0,this.xy=0,this.yx=0,this.yy=0,this.dx=0,this.dy=0,this.xx=e,this.xy=t,this.yx=a,this.yy=i,this.dx=r,this.dy=s}multiplyVector(e){return new r.default(this.xx*e.x+this.xy*e.y,this.yx*e.x+this.yy*e.y)}multiplyPoint(e){return new r.default(this.xx*e.x+this.xy*e.y+this.dx,this.yx*e.x+this.yy*e.y+this.dy)}multiplyMatrix(e){let t=this;return new s(t.xx*e.xx+t.xy*e.yx,t.xx*e.xy+t.xy*e.yy,t.yx*e.xx+t.yy*e.yx,t.yx*e.xy+t.yy*e.yy,t.xx*e.dx+t.xy*e.dy+t.dx,t.yx*e.dx+t.yy*e.dy+t.dy)}static translation(e=0,t=0){return new s(1,0,0,1,e,t)}static rotation(e=0){let t=Math.sin(e),a=Math.cos(e);return new s(a,-t,t,a,0,0)}static scale(e=1,t=1){return new s(e,0,0,t,0,0)}}t.default=s},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(10),s=a(1),n=i(a(11)),l=i(a(0)),o=i(a(5));t.default=class{constructor({imageName:e="",damage:t=0,craftQuanity:a=1,onApply:i=((e,t)=>{})}){this.damage=0,this.craftQuantity=1,this.imageName=e,this.damage=t,this.onApply=i,this.craftQuantity=1}apply(e,t){0!==this.damage&&(e.health-=this.damage+t.damage),null!=this.onApply&&this.onApply(e,t),r.playSound(o.default.randomFlipSound(),{volume:.25})}get imagePath(){return"cards/"+(this.imageName||this.name)}get image(){if(this.generatedImage)return this.generatedImage;let e=s.getImage("cards/Blank"),t=s.getImage(this.imagePath);if(!e.complete||!t.complete||!s.isFontLoaded("pixel"))return e;let a=new OffscreenCanvas(0,0),i=new n.default(a);i.resize(o.default.dimensions.x,o.default.dimensions.y,2),i.smooth(!1),i.vimage(e,l.default.ZERO),i.image(t,o.default.dimensions.x/2-t.width/2,o.default.upperSectionHeight/2-t.height/2);let r=o.default.dimensions.x/12,h=o.default.dimensions.x-2*r,u=(o.default.dimensions.y-o.default.upperSectionHeight-16)/2,d=o.default.upperSectionHeight+16+u-2;return i.fillStyle("#D2B9A6").text(this.name.toUpperCase(),r,d,h,"16px pixel"),this.generatedImage=a.transferToImageBitmap(),this.generatedImage}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(3));class s{static getKey(e){return e.map(e=>e.name).sort().join("-")}static addRecipe(e,t){let a=s.getKey(t);s.recipes[a]=e}static getProduct(e){let t=s.getKey(e);return s.recipes[t]||r.default.Volatile}}s.recipes={};{let e=s.addRecipe,{Attack1:t,Attack2:a,Acid:i,Molotov:n,Poison:l,Heal1:o,Heal2:h,Karma:u,Volatile:d,Dread:c,Blood:f,Leeches:p,Infusion:m,Meds:g,Dissect:y,Pact:x,Roids:w,Chaos:b,Bash:v,Charma:_,Smolder:M,FireBreath:P,Fortify:k,LifeSteal:S,Bite:T,SoulStare:O,Chaol:A,PlaneShift:j}=r.default;e(j,[u,b,x]),e(t,[d,d]),e(a,[t,t]),e(v,[a,a]),e(i,[t,t,t]),e(i,[t,a]),e(l,[d,o]),e(n,[l,t]),e(f,[p,o]),e(w,[i,f]),e(x,[f,u]),e(y,[p,u]),e(P,[t,t,t,t,t]),e(o,[d]),e(h,[o,o]),e(u,[o,o,o]),e(c,[t,d]),e(m,[f,o]),e(_,[b,u]),e(M,[t,t,t,t]),e(k,[o,o,o,o,o]),e(A,[h,b]),e(b,[d,d,d]),e(g,[d,h]),e(p,[t,o]),e(O,[b,f]),e(S,[a,h]),e(T,[a,o])}t.default=s},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(9)),s=i(a(14)),n=a(13),l=(e,t)=>e.layer-t.layer;t.default=class{constructor(e,t,a=[]){this.cameraTransform=new r.default,this.objects=[],this.canvas=e,this.cameraTransform=t;for(let e of a)this.add(e)}screneToWorldPoint(e){return this.cameraTransform.transformPoint(e)}screneToWorldVector(e){return this.cameraTransform.transformVector(e)}worldToScrenePoint(e){return this.cameraTransform.inverseTransformPoint(e)}worldToScreneVector(e){return this.cameraTransform.inverseTransformVector(e)}get mousePosition(){return this.screneToWorldPoint(s.default.mouseScreenPosition(this.canvas))}render(){let{canvas:e}=this;e.push(),e.inverseTransform(this.cameraTransform),this.objects.sort(l);for(let t of this.objects)e.push(),e.transform(t.transform),t.onRender(e,this),e.pop();e.pop()}update(){for(let e of this.objects)e.onUpdate(this)}add(e){this.objects.push(e),e.onBuildScene(this)}objectsInBox(e,t=(()=>!0)){let a=[];for(let i of this.objects)n.boxOverlaps(e,i)&&t(i)&&a.push(i);return a}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=new Set;t.scheduleTask=function(e,t,a){return!i.has(e)&&(i.add(e),setTimeout(()=>{try{a()}catch(e){throw e}finally{i.delete(e)}},t),!0)}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(2)),s=a(4),n=a(1),l=i(a(7));t.default=class extends r.default{constructor(){super(...arguments),this.layer=-100}onRender(e){let{enemyCount:t}=l.default.instance;e.rect(0,150,e.dimensions.x,e.dimensions.y).fillStyle(s.rgb(100,100,100)).fill(),e.image(n.getImage("Ground"),0,145,this.dimensions.x,200),e.image(n.getImage("BackGroundMid"),0,0,e.dimensions.x,150),e.fillStyle(s.rgb(255,255,255)).text("Level "+t,e.dimensions.x/2-45,30,100,"40px pixel")}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(a(17)),s=a(1),n=a(0),l=i(a(16)),o=i(a(18)),h=i(a(3));class u{constructor(e,t,a,i){this.strength=100,this.health=e,this.strength=t,this.cardTypes=a,this.spriteSheet=i}create(){return new l.default(n.vector(520,80),this.health,new o.default(this.spriteSheet),this.cardTypes,this.strength)}}let{Attack1:d,Bite:c,Fortify:f,DamageBuff:p,HeavyAttack:m,MaxHealthBuff:g,LifeSteal:y,Cower:x,Smolder:w,FireBreath:b,SoulStare:v,PuppyEyes:_,Karma:M,Blood:P,Pact:k,Roids:S,Poison:T,Meds:O,Molotov:A,Dread:j}=h.default;const D=[new u(15,-3,[x,x,x,x,x,x,x,x,d],new r.default({image:s.getImage("Chadwick"),frameWidth:500,scale:.25})),new u(65,10,[w,w,c],new r.default({image:s.getImage("Archlizard"),center:n.vector(48,21),frameWidth:100,scale:2.4})),new u(45,15,[w,c,m],new r.default({image:s.getImage("BoneDragon"),center:n.vector(30,48),frameWidth:84,scale:1.4})),new u(40,5,[g,p,p,P,d],new r.default({image:s.getImage("Noodle"),frameWidth:100,scale:1.4})),new u(20,0,[v,v,v,v,v,k],new r.default({image:s.getImage("EyeSlug"),frameWidth:100,scale:.25})),new u(50,15,[p,p,d,T,A],new r.default({image:s.getImage("TribalTimmy"),frameWidth:100,scale:1.5})),new u(60,5,[v,y,y,P,y,y,M],new r.default({image:s.getImage("OcculentAustin"),frameWidth:100,scale:2.3})),new u(35,5,[f,p,d,j],new r.default({image:s.getImage("MaskedMaggot"),frameWidth:100,scale:1.5})),new u(45,5,[v,f,p],new r.default({image:s.getImage("Headsman"),frameWidth:88,scale:2.2})),new u(30,5,[f,y,y,j,T,T],new r.default({image:s.getImage("Pterry"),frameWidth:100,scale:2})),new u(999,20,[v,f,v],new r.default({image:s.getImage("EyeDemon"),frameWidth:101,scale:2}))];t.getEnemy=function(e){return D[e].create()},t.newEncounter=function(e){let t=D[Math.floor((D.length-1)*Math.random())].create();return t.damage+=e,t}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(1),s=i(a(2)),n=i(a(6)),l=a(0);t.default=class extends s.default{constructor(e,t){super(l.vector(e,t),100,400),this.preview=0,this.layer=60,this.sprite=new n.default(r.getImage("Ledger")).setSource({x:0,y:0,w:100,h:100}).setDimensions(l.vector(100,60))}onRender(e,t){let{sprite:a}=this,i=t.mousePosition;if(this.contains(i),a){let t=l.vector(32,45);a.draw(e,t.x,t.y,!0),e.fillStyle("rgba( 0, 0, 0, 0.9 )"),e.text("Menu",2,50,60,"20px pixel")}}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(1),s=i(a(2)),n=i(a(6)),l=a(0);t.default=class extends s.default{constructor(e,t,a,i){super(l.vector(e,t),a,i),this.layer=50,this.equipment=[],this.sprite=new n.default(r.getImage("Table")).setSource({x:0,y:0,w:100,h:100}).setDimensions(l.vector(a,i))}onRender(e,t){let{sprite:a}=this,i=(t.mousePosition,l.vector(32,45));a.draw(e,i.x,i.y,!0)}}},function(e,t,a){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(1),s=i(a(2)),n=i(a(6)),l=a(0);t.default=class extends s.default{constructor(e,t){super(l.vector(e,t),100,400),this.layer=60,this.sprite=new n.default(r.getImage("Ledger")).setSource({x:0,y:0,w:100,h:100}).setDimensions(l.vector(100,60))}onRender(e,t){let{sprite:a}=this,i=t.mousePosition,r=l.vector(32,45);if(a.draw(e,r.x,r.y,!0),e.fillStyle("rgba( 0, 0, 0, 0.9 )"),e.text("Manual",2,50,60,"20px pixel"),this.contains(i)){let t="\n            \nCombine Cards\n            \nIn the Boiler\n            \nTo craft new Cards",a=55,i=35,r=a.toString()+"px pixel",s=t.split("\n");e.fillStyle("rgba(222, 194, 128, 0.8)"),e.rect(-500,-500,1e3,1e3).fill();for(let t=0;t<s.length;t++)e.fillStyle("white"),e.text(s[t],-450,(-s.length+t)*a,s[t].length*i,r),e.fillStyle("blue"),e.text(s[t],-445,(-s.length+t)*a+5,s[t].length*i,r)}}}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=a(19);t.startGameLoop=function(e){window.onload=()=>{let t=new e;!function e(){i.GameClock.tick(),t.update(),requestAnimationFrame(e)}()}}}]);