!function(t){var e={};function a(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=e,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(a.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(i,r,function(e){return t[e]}.bind(null,r));return i},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=21)}([function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i={};function r(t,e){if(i[t])return i[t];let a=e(t);return i[t]=a,a}function s(t,e){return-1==t.indexOf(".")&&(t=t+"."+e),"/assets/"+t}e.getAsset=r,e.getImage=function(t){return r(s("images/"+t,"png"),t=>{let e=new Image;return e.src=t,e})},e.getAudio=function(t){return r(s("audio/"+t,"mp3"),t=>new Audio(t))},e.isFontLoaded=function(t){return document.fonts.check("0px "+t)}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(5));function s(t,e){return new n(t,e)}e.vector=s;class n{constructor(t,e){this.x=t,this.y=e}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get lengthSquared(){return this.x*this.x+this.y*this.y}get unit(){return this.multiply(1/this.length)}get leftNormal(){return new n(-this.y,this.x)}get rightNormal(){return new n(this.y,-this.x)}get angle(){return Math.atan2(this.y,this.x)}get negate(){return new n(-this.x,-this.y)}get values(){return[this.x,this.y]}get half(){return new n(.5*this.x,.5*this.y)}get copy(){return new n(this.x,this.y)}add(t){return new n(this.x+t.x,this.y+t.y)}addXY(t,e){return new n(this.x+t,this.y+e)}addX(t){return new n(this.x+t,this.y)}addY(t){return new n(this.x,this.y+t)}subtract(t){return new n(this.x-t.x,this.y-t.y)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}multiply(t){return new n(this.x*t,this.y*t)}stretch(t,e){return new n(this.x*t,this.y*e)}divide(t){return new n(this.x/t,this.y/t)}lerp(t,e){return this.multiply(1-e).add(t.multiply(e))}rotated(t){return this.complexProduct(n.polar(t,1))}isRightOf(t){return this.cross(t)>0}normalOnSide(t){return t.isRightOf(this)?this.rightNormal:this.leftNormal}*[Symbol.iterator](){yield this.x,yield this.y}complexProduct(t){let e=this.x*t.x-this.y*t.y,a=this.x*t.y+this.y*t.x;return new n(e,a)}complexQuotient(t){let e=t.lengthSquared,a=this.x*t.x+this.y*t.y,i=this.y*t.x-this.x*t.y;return new n(a/e,i/e)}get complexExponential(){let t=Math.exp(this.x);return new n(t*Math.cos(this.y),t*Math.sin(this.y))}projection(t){return t.multiply(t.dot(this)/t.lengthSquared)}equivalent(t,e=1e-6){return r.default.equalivalent(this.x,t.x,e)&&r.default.equalivalent(this.y,t.y,e)}static polar(t,e){return new n(Math.cos(t)*e,Math.sin(t)*e)}static lissajous(t,e,a,i=1,n=i,l=0,o=0){return s(Math.cos(r.default.TAU*(t+l)/e)*i,Math.sin(r.default.TAU*(t+o)/a)*n)}static random(t){let e=2*Math.random()*Math.PI;return n.polar(e,t)}}e.default=n,n.ZERO=new n(0,0),n.ONE=new n(1,1),n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.DOWN=new n(0,1),n.UP=new n(0,-1)},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(5));function s(t,e){return new n(t,e)}e.vector=s;class n{constructor(t,e){this.x=t,this.y=e}get length(){return Math.sqrt(this.x*this.x+this.y*this.y)}get lengthSquared(){return this.x*this.x+this.y*this.y}get angle(){return Math.atan2(this.y,this.x)}unit(){return this.multiply(1/this.length)}leftNormal(){return new n(-this.y,this.x)}rightNormal(){return new n(this.y,-this.x)}negate(){return new n(-this.x,-this.y)}half(){return new n(.5*this.x,.5*this.y)}copy(){return new n(this.x,this.y)}floor(t=1){return new n(Math.floor(this.x/t)*t,Math.floor(this.y/t)*t)}add(t){return new n(this.x+t.x,this.y+t.y)}addXY(t,e){return new n(this.x+t,this.y+e)}addX(t){return new n(this.x+t,this.y)}addY(t){return new n(this.x,this.y+t)}subtract(t){return new n(this.x-t.x,this.y-t.y)}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}multiply(t){return new n(this.x*t,this.y*t)}stretch(t,e){return new n(this.x*t,this.y*e)}divide(t){return new n(this.x/t,this.y/t)}lerp(t,e){return this.multiply(1-e).add(t.multiply(e))}rotated(t){return this.complexProduct(n.polar(t,1))}isRightOf(t){return this.cross(t)>0}normalOnSide(t){return t.isRightOf(this)?this.rightNormal():this.leftNormal()}*[Symbol.iterator](){yield this.x,yield this.y}complexProduct(t){let e=this.x*t.x-this.y*t.y,a=this.x*t.y+this.y*t.x;return new n(e,a)}complexQuotient(t){let e=t.lengthSquared,a=this.x*t.x+this.y*t.y,i=this.y*t.x-this.x*t.y;return new n(a/e,i/e)}complexExponential(){let t=Math.exp(this.x);return new n(t*Math.cos(this.y),t*Math.sin(this.y))}projection(t){return t.multiply(t.dot(this)/t.lengthSquared)}equivalent(t,e=1e-6){return r.default.equalivalent(this.x,t.x,e)&&r.default.equalivalent(this.y,t.y,e)}static polar(t,e){return new n(Math.cos(t)*e,Math.sin(t)*e)}static lissajous(t,e,a,i=1,n=i,l=0,o=0){return s(Math.cos(r.default.TAU*(t+l)/e)*i,Math.sin(r.default.TAU*(t+o)/a)*n)}static random(t){let e=2*Math.random()*Math.PI;return n.polar(e,t)}}e.default=n,n.ZERO=new n(0,0),n.ONE=new n(1,1),n.RIGHT=new n(1,0),n.LEFT=new n(-1,0),n.DOWN=new n(0,1),n.UP=new n(0,-1)},function(t,e,a){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(a(2)),n=a(14),l=r(a(10));e.default=class{constructor(t=s.default.ZERO,e=0,a=0){this.layer=0,this.transform=new l.default,this.width=0,this.height=0,this.position=t,this.width=e,this.height=a}get position(){return this.transform.position}set position(t){this.transform.position=t}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get dimensions(){return s.vector(this.width,this.height)}get center(){return this.position.add(this.dimensions.half())}contains(t){return n.boxContains(this,t)}overlaps(t){return n.boxOverlaps(this,t)}onRender(t,e){}onUpdate(t){}onBuildScene(t){}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(28)),s={PlaneShift:new r.default({onApply(t,e){let a=e.maxHealth,i=e.health;e.maxHealth=t.maxHealth,e.health=t.health,t.maxHealth=a,t.health=i,console.log("You Win")}}),Attack1:new r.default({imageName:"Attack",damage:5}),Attack2:new r.default({imageName:"Attack",damage:10}),Bash:new r.default({imageName:"Attack",damage:20}),Acid:new r.default({imageName:"Acid2",damage:15}),Molotov:new r.default({damage:5,onApply(t){t.heal-=3}}),Poison:new r.default({craftQuanity:2,onApply(t){t.health+=10,t.heal-=5}}),Blood:new r.default({onApply(t,e){t.health-=20,t.damage+=3}}),Pact:new r.default({imageName:"Pact3",onApply(t,e){if(e){let a=e.maxHealth-e.health;t.health-=a,e.health+=Math.floor(a/3),e.maxHealth-=Math.floor(a/3)}}}),Dissect:new r.default({onApply(t,e){e&&t.health<=5&&(e.maxHealth+=10,e.health=e.maxHealth,e.heal-=10),t.health-=5}}),Roids:new r.default({onApply(t,e){t.damage+=10,t.heal-=15}}),Leeches:new r.default({imageName:"Leeches",craftQuanity:2,damage:5,onApply(t,e){e.health+=5}}),Meds:new r.default({imageName:"Meds",craftQuanity:2,onApply(t){t.heal<0?t.heal+=10:t.heal>=0&&(t.heal-=10)}}),Heal1:new r.default({imageName:"Heal",onApply(t){t.health+=5}}),Heal2:new r.default({imageName:"Heal",onApply(t){t.health+=10}}),Chaol:new r.default({imageName:"Heal",onApply(t){let e=Math.floor(50*Math.random());t.health+=e}}),Infusion:new r.default({imageName:"Infusion",onApply(t){t.maxHealth-=5,t.health+=15,t.heal+=3}}),Karma:new r.default({onApply(t){t.health-=5,t.maxHealth+=10}}),Dread:new r.default({craftQuanity:2,onApply(t){t.damage-=4}}),Volatile:new r.default({damage:0,craftQuanity:2,onApply(t){let e=Math.floor(10*Math.random()),a=Math.random()>.5?e:-e;t.health-=a}}),Chaos:new r.default({damage:0,onApply(t){let e=Math.floor(40*Math.random()),a=Math.random()>.5?e:-e;t.health-=a}}),Charma:new r.default({onApply(t){let e=Math.floor(30*Math.random());t.maxHealth+=e}}),Cower:new r.default({onApply(t,e){e.damage+=10,e.health-=3,e.heal+=3}}),PuppyEyes:new r.default({onApply(t,e){e.health+=3,e.heal+=10}}),FireBreath:new r.default({damage:10,onApply(t,e){e.damage+=3,t.heal-=3}}),Smolder:new r.default({onApply(t,e){e.health+=10,e.heal+=5}}),Bite:new r.default({damage:15,onApply(t,e){e.health+=10}}),DamageBuff:new r.default({onApply(t,e){e.damage+=10}}),Fortify:new r.default({onApply(t,e){e.heal+=10}}),MaxHealthBuff:new r.default({onApply(t,e){e.maxHealth+=15}}),HeavyAttack:new r.default({damage:25}),SoulStare:new r.default({onApply(t,e){t.maxHealth-=10,e.maxHealth+=10,e.health+=5}}),LifeSteal:new r.default({damage:10,onApply(t,e){e.health+=10+e.damage}})};for(let t in s){s[t].name=t}e.default=s},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class i{static modulus(t,e){return(t%e+e)%e}static lerp(t,e,a){return t*(1-a)+e*a}static clamp(t,e,a){return t<e?e:t>a?a:t}static shortestRotation(t,e){let a=i.modulus(e-t,i.TAU);return a>Math.PI&&(a-=i.TAU),a}static angleLerp(t,e,a){return t+i.shortestRotation(t,e)*a}static sigmoid(t){let e=Math.exp(t);return e/(e+1)}static soften(t,e=1){return function(t){return t>1?t-.5:t*t/2}(Math.abs(t)/e)*e*Math.sign(t)}static equalivalent(t,e,a=1e-6){return Math.abs(t-e)<=a}}e.default=i,i.TAU=2*Math.PI,i.degreesToRadians=i.TAU/360},function(t,e,a){"use strict";function i(t,e,a,i=1){return new r(t,e,a,i)}Object.defineProperty(e,"__esModule",{value:!0}),e.rgb=function(t,e,a){return new r(t,e,a)},e.rgba=i;class r{constructor(t,e,a,i=1){this.r=t,this.g=e,this.b=a,this.a=i}static parse(t){if("#"==t[0]){let e=t.match(/[0-9a-f]{2,2}/gi).map(t=>parseInt(t,16));return new r(e[0],e[1],e[2],(e[3]||255)/255)}if(-1==t.indexOf("(")){let e=r[t];if(!e)throw new Error("unrecognized color "+t);return e}let e=t.match(/\w+/)[0],a=t.match(/\d+/g).map(t=>parseFloat(t));switch(e){case"rgb":return new r(a[0],a[1],a[2]);case"rgba":return new r(a[0],a[1],a[2],a[3])}}toString(){return`rgba(${this.r},${this.g},${this.b},${this.a})`}}e.default=r,r.aliceblue=r.parse("#f0f8ff"),r.antiquewhite=r.parse("#faebd7"),r.aqua=r.parse("#00ffff"),r.aquamarine=r.parse("#7fffd4"),r.azure=r.parse("#f0ffff"),r.beige=r.parse("#f5f5dc"),r.bisque=r.parse("#ffe4c4"),r.black=r.parse("#000000"),r.blanchedalmond=r.parse("#ffebcd"),r.blue=r.parse("#0000ff"),r.blueviolet=r.parse("#8a2be2"),r.brown=r.parse("#a52a2a"),r.burlywood=r.parse("#deb887"),r.cadetblue=r.parse("#5f9ea0"),r.chartreuse=r.parse("#7fff00"),r.chocolate=r.parse("#d2691e"),r.coral=r.parse("#ff7f50"),r.cornflowerblue=r.parse("#6495ed"),r.cornsilk=r.parse("#fff8dc"),r.crimson=r.parse("#dc143c"),r.cyan=r.parse("#00ffff"),r.darkblue=r.parse("#00008b"),r.darkcyan=r.parse("#008b8b"),r.darkgoldenrod=r.parse("#b8860b"),r.darkgray=r.parse("#a9a9a9"),r.darkgreen=r.parse("#006400"),r.darkgrey=r.parse("#a9a9a9"),r.darkkhaki=r.parse("#bdb76b"),r.darkmagenta=r.parse("#8b008b"),r.darkolivegreen=r.parse("#556b2f"),r.darkorange=r.parse("#ff8c00"),r.darkorchid=r.parse("#9932cc"),r.darkred=r.parse("#8b0000"),r.darksalmon=r.parse("#e9967a"),r.darkseagreen=r.parse("#8fbc8f"),r.darkslateblue=r.parse("#483d8b"),r.darkslategray=r.parse("#2f4f4f"),r.darkslategrey=r.parse("#2f4f4f"),r.darkturquoise=r.parse("#00ced1"),r.darkviolet=r.parse("#9400d3"),r.deeppink=r.parse("#ff1493"),r.deepskyblue=r.parse("#00bfff"),r.dimgray=r.parse("#696969"),r.dimgrey=r.parse("#696969"),r.dodgerblue=r.parse("#1e90ff"),r.firebrick=r.parse("#b22222"),r.floralwhite=r.parse("#fffaf0"),r.forestgreen=r.parse("#228b22"),r.fuchsia=r.parse("#ff00ff"),r.gainsboro=r.parse("#dcdcdc"),r.ghostwhite=r.parse("#f8f8ff"),r.goldenrod=r.parse("#daa520"),r.gold=r.parse("#ffd700"),r.gray=r.parse("#808080"),r.green=r.parse("#008000"),r.greenyellow=r.parse("#adff2f"),r.grey=r.parse("#808080"),r.honeydew=r.parse("#f0fff0"),r.hotpink=r.parse("#ff69b4"),r.indianred=r.parse("#cd5c5c"),r.indigo=r.parse("#4b0082"),r.ivory=r.parse("#fffff0"),r.khaki=r.parse("#f0e68c"),r.lavenderblush=r.parse("#fff0f5"),r.lavender=r.parse("#e6e6fa"),r.lawngreen=r.parse("#7cfc00"),r.lemonchiffon=r.parse("#fffacd"),r.lightblue=r.parse("#add8e6"),r.lightcoral=r.parse("#f08080"),r.lightcyan=r.parse("#e0ffff"),r.lightgoldenrodyellow=r.parse("#fafad2"),r.lightgray=r.parse("#d3d3d3"),r.lightgreen=r.parse("#90ee90"),r.lightgrey=r.parse("#d3d3d3"),r.lightpink=r.parse("#ffb6c1"),r.lightsalmon=r.parse("#ffa07a"),r.lightseagreen=r.parse("#20b2aa"),r.lightskyblue=r.parse("#87cefa"),r.lightslategray=r.parse("#778899"),r.lightslategrey=r.parse("#778899"),r.lightsteelblue=r.parse("#b0c4de"),r.lightyellow=r.parse("#ffffe0"),r.lime=r.parse("#00ff00"),r.limegreen=r.parse("#32cd32"),r.linen=r.parse("#faf0e6"),r.magenta=r.parse("#ff00ff"),r.maroon=r.parse("#800000"),r.mediumaquamarine=r.parse("#66cdaa"),r.mediumblue=r.parse("#0000cd"),r.mediumorchid=r.parse("#ba55d3"),r.mediumpurple=r.parse("#9370db"),r.mediumseagreen=r.parse("#3cb371"),r.mediumslateblue=r.parse("#7b68ee"),r.mediumspringgreen=r.parse("#00fa9a"),r.mediumturquoise=r.parse("#48d1cc"),r.mediumvioletred=r.parse("#c71585"),r.midnightblue=r.parse("#191970"),r.mintcream=r.parse("#f5fffa"),r.mistyrose=r.parse("#ffe4e1"),r.moccasin=r.parse("#ffe4b5"),r.navajowhite=r.parse("#ffdead"),r.navy=r.parse("#000080"),r.oldlace=r.parse("#fdf5e6"),r.olive=r.parse("#808000"),r.olivedrab=r.parse("#6b8e23"),r.orange=r.parse("#ffa500"),r.orangered=r.parse("#ff4500"),r.orchid=r.parse("#da70d6"),r.palegoldenrod=r.parse("#eee8aa"),r.palegreen=r.parse("#98fb98"),r.paleturquoise=r.parse("#afeeee"),r.palevioletred=r.parse("#db7093"),r.papayawhip=r.parse("#ffefd5"),r.peachpuff=r.parse("#ffdab9"),r.peru=r.parse("#cd853f"),r.pink=r.parse("#ffc0cb"),r.plum=r.parse("#dda0dd"),r.powderblue=r.parse("#b0e0e6"),r.purple=r.parse("#800080"),r.rebeccapurple=r.parse("#663399"),r.red=r.parse("#ff0000"),r.rosybrown=r.parse("#bc8f8f"),r.royalblue=r.parse("#4169e1"),r.saddlebrown=r.parse("#8b4513"),r.salmon=r.parse("#fa8072"),r.sandybrown=r.parse("#f4a460"),r.seagreen=r.parse("#2e8b57"),r.seashell=r.parse("#fff5ee"),r.sienna=r.parse("#a0522d"),r.silver=r.parse("#c0c0c0"),r.skyblue=r.parse("#87ceeb"),r.slateblue=r.parse("#6a5acd"),r.slategray=r.parse("#708090"),r.slategrey=r.parse("#708090"),r.snow=r.parse("#fffafa"),r.springgreen=r.parse("#00ff7f"),r.steelblue=r.parse("#4682b4"),r.tan=r.parse("#d2b48c"),r.teal=r.parse("#008080"),r.thistle=r.parse("#d8bfd8"),r.tomato=r.parse("#ff6347"),r.turquoise=r.parse("#40e0d0"),r.violet=r.parse("#ee82ee"),r.wheat=r.parse("#f5deb3"),r.white=r.parse("#ffffff"),r.whitesmoke=r.parse("#f5f5f5"),r.yellow=r.parse("#ffff00"),r.yellowgreen=r.parse("#9acd32"),r.transparent=i(0,0,0,0)},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=a(0),n=i(a(3)),l=i(a(15)),o=r(a(1)),h=i(a(9)),u=i(a(16)),d=a(11);class c extends n.default{constructor(t,e){super(t,c.dimensions.x,c.dimensions.y),this.grabOffset=o.default.ZERO,this.dealDelay=0,this.position=t.copy,this.type=e}get inHand(){return this.deck&&this.deck.isHand}get isPreview(){return!this.deck}get grabbed(){return h.default.instance.grabbing==this}apply(t,e,a,i){this.type.apply(t,i),e.remove(this);let r=0==a.length?0:Math.floor(Math.random()*a.length);a.insertAt(this,r)}onUpdate(t){let{deck:e}=this;if(e&&0==this.dealDelay){let t=e.cardPosition(this);if(t.subtract(this.position).length>1){let e=t.subtract(this.position);this.position=this.position.add(e.unit.multiply(e.length/10))}}if(1==this.dealDelay&&d.playSound(c.randomFlipSound(),{volume:1/8}),this.dealDelay=Math.max(0,this.dealDelay-1),!this.inHand)return;let a=h.default.instance,{buttons:i}=l.default,r=t.mousePosition;i.Mouse0?this.contains(r)&&!a.grabbing&&(a.grabbing=this,this.grabOffset=this.position.subtract(r)):this.grabbed&&this.onDrop(t),this.grabbed&&(this.position=r.add(this.grabOffset))}onDrop(t){h.default.instance.grabbing=void 0;let{hand:e,discard:a,pawns:i,player:r,enemy:s}=h.default.instance;for(let t of i)if(t.overlaps(this))if(t==r)this.apply(r,e,a,r);else if(t!==r&&(this.apply(t,e,a,r),r.animator)){let t="glassBreak_"+Math.floor(3*Math.random()).toString()+".wav";setTimeout(()=>d.playSound(t,{volume:.09}),600),r.animator.play(900)}let n=t.objectsInBox(this,t=>t instanceof u.default)[0];n&&(n.melt(this),e.remove(this))}onRender(t){let{type:e,inHand:a,isPreview:i}=this;i||a?(t.scale(.5,.5),t.vimage(e.image,o.default.ZERO)):t.vimage(s.getImage("cards/Blank"),o.default.ZERO)}static randomFlipSound(){return"cardflip_"+Math.floor(4*Math.random())+".wav"}}e.default=c,c.dimensions=o.vector(68,108),c.upperSectionHeight=80},function(t,e,a){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(2));e.default=class{constructor(t){this.image=t}get dimensions(){return this._dimensions||r.vector(this.image.width,this.image.height)}get position(){return r.default.ZERO}get center(){return this._center||this.dimensions.half()}setDimensions(t){return this._dimensions=t,this}setSource(t){return this.source=t,this}setCenter(t){return this._center=t,this}draw(t,e=0,a=0,i=!1){let{image:r,source:s,dimensions:n}=this,{x:l,y:o}=n;if(i){let t=this.center;e-=t.x,a-=t.y}s?t.imageSource(s.x,s.y,s.w,s.h).partialImage(this.image,e,a,l,o):t.image(r,e,a,l,o)}vdraw(t,e,a=!1){this.draw(t,e.x,e.y)}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=i(a(12)),n=i(a(13)),l=i(a(17)),o=i(a(7)),h=i(a(16)),u=i(a(4)),d=a(11),c=a(0),f=i(a(10)),p=r(a(1)),m=i(a(5)),y=a(6),g=i(a(30)),x=a(31),w=i(a(32)),b=i(a(18)),v=a(33),_=i(a(19)),M=i(a(34)),P=i(a(35)),S=i(a(36));class k{constructor(){this.win=!1,this.handCap=5,this.enemyCount=0,this.backgroundColor=y.rgb(0,0,255),this.deck=new n.default(10,1/0,30,250,-1,1,!1),this.hand=new n.default(this.handCap,this.handCap,145,250,90,0,!0),this.discard=new n.default(0,1/0,600,250,1,1,!1),this.background=new w.default,this.table=new P.default(330,210,515,600),this.melter=new h.default(275,350),this.ledger=new M.default(180,370),this.manual=new S.default(480,370),this.enemy=v.getEnemy(0),this.player=new l.default(p.vector(100,80),60,new _.default(new b.default({image:c.getImage("PawnEgor"),center:p.vector(18,38),frameWidth:90,scale:2.4}))),this.ambience=d.audioInstance(c.getAudio("DungeonAmbience"),{volume:.025}),this.tunes=d.audioInstance(c.getAudio("SomberTune.wav"),{volume:.75}),this.endingTurn=!1,k.instance=this,this.canvas=new s.default("canvas"),this.player.main=!0,this.player.heal=0,this.player.damage=0,addEventListener("keyup",t=>this.keyup(t))}get pawns(){return[this.player,this.enemy]}keyup(t){"Enter"==t.key&&this.tryEndTurn(),"e"==t.key&&this.player.animator.play(1e3)}get canEndTurn(){let{deck:t,hand:e,endingTurn:a}=this;return!a&&0==e.length&&t.length>0&&this.player.health>0}tryEndTurn(){if(!this.canEndTurn)return;this.endingTurn=!0;let{enemy:t,player:e,melter:a,deck:i}=this;t.onEndTurn(),t.UseHand(e,t),e.onEndTurn(),t.health>0?d.playSound("slap.wav",{volume:.1}):(this.enemyCount+=1,11==this.enemyCount?(console.log("You Win"),this.win=!0):this.enemy=v.getEnemy(this.enemyCount)),t.animator&&t.animator.play(1e3),e.health<=0?window.setTimeout(()=>{location.reload()},5e3):this.refillHand();for(let t of a.products)i.cards.push(t);a.base=new o.default(a.position,u.default.Volatile),a.ingredients=[],this.endingTurn=!1}refillHand(){let{deck:t,hand:e,discard:a,handCap:i}=this,r=6;for(;e.length<i&&(t.length>0||a.length>0);)if(0==t.length)for(;a.length>0;)a.transferCard(t,5*r++);else t.transferCard(e,5*r++)}update(){let{canvas:t,deck:e,hand:a,discard:i,enemy:r,player:s,melter:n,background:l}=this,o=new g.default(t,this.cameraTransform(),[s,r,e,a,i,this.table,n,l,this.ledger,this.manual]);this.render(o),o.update(),this.canEndTurn&&x.scheduleTask("endTurn",1e3,()=>this.tryEndTurn());this.backgroundColor.b>100?(this.backgroundColor.b-=10,this.backgroundColor.r-=10):(this.backgroundColor.b+=.1,this.backgroundColor.r+=.1),this.ambience.paused&&d.playAudio(this.ambience),this.tunes.paused&&d.playAudio(this.tunes)}cameraTransform(){let{canvas:t}=this,e=m.default.soften(this.player.dizzyTime/4,20),a=m.default.lerp(1,Math.cos(e/4),.1),i=new f.default(t.center,Math.sin(e/13)*m.default.TAU/8,new p.default(1/a,1/a),t.center,new f.default(t.center,0,new p.default(1,1/Math.cos(.1*e)),t.center));let r=this.player.damageTime,s=Math.sqrt(r),n=p.default.lissajous(20*r,7,13,s),l=Math.sin(r)*s*.001;return new f.default(t.center.add(n),l,p.default.ONE,t.center,i)}render(t){let{canvas:e}=this;if(e.resize(700,500,2),e.smooth(!1),e.background(this.backgroundColor),t.cameraTransform=this.cameraTransform(),t.render(),this.player.damageTime>0&&e.background(y.rgba(255,0,0,Math.sqrt(this.player.damageTime/160))),this.player.health<=0){e.fillStyle(y.rgb(100,0,0));let t=700,a=e.dimensions.half.addXY(-t/2,-30);e.text("YOU DIED ON LEVEL "+this.enemyCount,a.x,a.y,t,"250px pixel")}if(this.win){e.fillStyle(y.rgb(0,0,100));let t=700,a=e.dimensions.half.addX(-t/2);e.text("YOU WIN",a.x,a.y,t,"400px pixel")}}}e.default=k},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(2)),s=i(a(27));e.default=class{constructor(t=new r.default(0,0),e=0,a=new r.default(1,1),i=new r.default(0,0),s){this.position=t,this.rotation=e,this.scale=a,this.center=i,this.parent=s}get localMatrix(){return s.default.translation(this.position.x,this.position.y).multiplyMatrix(s.default.rotation(this.rotation)).multiplyMatrix(s.default.scale(this.scale.x,this.scale.y)).multiplyMatrix(s.default.translation(-this.center.x,-this.center.y))}get localInverseMatrix(){return s.default.translation(this.center.x,this.center.y).multiplyMatrix(s.default.scale(1/this.scale.x,1/this.scale.y)).multiplyMatrix(s.default.rotation(-this.rotation)).multiplyMatrix(s.default.translation(-this.position.x,-this.position.y))}get matrix(){let t=this.localMatrix;return this.parent?this.parent.matrix.multiplyMatrix(t):t}get inverseMatrix(){let t=this.localInverseMatrix;return this.parent?t.multiplyMatrix(this.parent.inverseMatrix):t}transformVector(t){return this.matrix.multiplyVector(t)}transformPoint(t){return this.matrix.multiplyPoint(t)}inverseTransformVector(t){return this.inverseMatrix.multiplyVector(t)}inverseTransformPoint(t){return this.inverseMatrix.multiplyPoint(t)}vectorToWorld(t){return this.transformVector(t)}pointToWorld(t){return this.transformPoint(t)}vectorToLocal(t){return this.inverseTransformVector(t)}pointToLocal(t){return this.inverseTransformPoint(t)}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=a(0);function r(t,e={}){let a=t.cloneNode();return Object.assign(a,e),a}function s(t){t.play().catch(t=>{})}e.audioInstance=r,e.playAudio=s,e.playSound=function(t,e){s(r(i.getAudio(t),e))}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(2)),s=i(a(6)),n=a(22);function l(t){return t instanceof s.default?t.toString():t}e.default=class{constructor(t){if(this.pixelDensity=1,this._imageSource={x:0,y:0,w:0,h:0},"string"==typeof t){let e=document.getElementById(t);if(!(e instanceof HTMLCanvasElement))throw new Error("No canvas with id: "+t+" found.");t=e}this.canvas=t,this.context=this.canvas.getContext("2d"),this.width=t.width,this.height=t.height}get dimensions(){return new r.default(this.width,this.height)}get center(){return this.dimensions.half()}resize(t,e,a=1){return this.width=t,this.height=e,this.canvas instanceof HTMLCanvasElement&&(this.canvas.style.width=t+"px",this.canvas.style.height=e+"px"),this.canvas.width=t*a,this.canvas.height=e*a,this.pixelDensity=a,this.scale(a,a),this}fitWindow(t=1){return this.resize(innerWidth,innerHeight,t),this}background(t){let{canvas:e,context:a,width:i,height:r}=this;return a.fillStyle=l(t),a.fillRect(0,0,i,r),this}clear(){return this.context.clearRect(0,0,this.width,this.height),this}reset(){this.context.resetTransform(),this.scale(this.pixelDensity,this.pixelDensity),this.clear()}vline(t,e){return this.line(t.x,t.y,e.x,e.y),this}line(t,e,a,i){let{context:r}=this;return r.beginPath(),r.moveTo(t,e),r.lineTo(a,i),r.closePath(),this}vrect(t,e,a=!1){return this.rect(t.x,t.y,e.x,e.y,a),this}rect(t,e,a,i,r=!1){let{context:s}=this;return r&&(t-=a/2,e-=i/2),s.beginPath(),s.rect(t,e,a,i),s.closePath(),this}vcircle(t,e){return this.circle(t.x,t.y,e),this}circle(t,e,a){let{context:i}=this;return i.beginPath(),i.ellipse(t,e,a,a,0,0,2*Math.PI),i.closePath(),this}stroke(){return this.context.stroke(),this}fill(){return this.context.fill(),this}strokeStyle(t){return this.context.strokeStyle=t.toString(),this}fillStyle(t){return this.context.fillStyle=l(t),this}lineWidth(t){return this.context.lineWidth=t,this}alpha(t){return this.context.globalAlpha=t,this}composition(t){return this.context.globalCompositeOperation=t,this}shadow(t,e="black"){return this.context.shadowBlur=t,this.context.shadowColor=e.toString(),this}smooth(t){return this.context.imageSmoothingEnabled=t,this}filter(t){if("string"==typeof t)this.context.filter=t;else if(null==t)this.context.filter="none";else{let e=Object.entries(t).map(([t,e])=>{"object"==typeof e&&(e=Object.values(Object).map(t=>t.toString()).join(", "));let a="hueRotate"==t?"turn":"";return n.camelToDashes(t)+"("+e+a+")"}).join(" ");this.context.filter=e}return this}vimage(t,e,a=r.default.ZERO,i=!1){return this.image(t,e.x,e.y,a.x,a.y,i),this}image(t,e=0,a=0,i=0,r=0,s=!1){return 0==t.width?this:(s?(e-=(i=t.width)/2,a-=(r=t.height)/2):(i=i||t.width,r=r||t.height),this.context.drawImage(t,e,a,i,r),this)}vpartialImage(t,e,a){return this.partialImage(t,e.x,e.y,a.x,a.y),this}partialImage(t,e=0,a=0,i=0,r=0){let{_imageSource:s}=this;i=i||s.w,r=r||s.h,this.context.drawImage(t,s.x,s.y,s.w,s.h,e,a,i,r)}vimageSource(t,e){return this.imageSource(t.x,t.y,e.x,e.y),this}imageSource(t,e,a,i){return this._imageSource={x:t,y:e,w:a,h:i},this}vtranslate(t){return this.translate(t.x,t.y),this}translate(t,e){return this.context.translate(t,e),this}translateToCenter(){return this.vtranslate(this.dimensions.half()),this}rotate(t){return this.context.rotate(t),this}vscale(t){return this.scale(t.x,t.y),this}scale(t,e){return this.context.scale(t,e),this}transform(t){let{x:e,y:a}=t.position,{x:i,y:r}=t.scale,{x:s,y:n}=t.center;return t.parent&&this.transform(t.parent),this.translate(e,a).rotate(t.rotation).scale(i,r).translate(-s,-n),this}inverseTransform(t){let{x:e,y:a}=t.position,{x:i,y:r}=t.scale,{x:s,y:n}=t.center;return this.translate(s,n).scale(1/i,1/r).rotate(-t.rotation).translate(-e,-a),t.parent&&this.inverseTransform(t.parent),this}applyMatrix(t){let{m11:e,m12:a,m13:i,m21:r,m22:s,m23:n}=t;return this.context.transform(e,r,a,s,i,n),this}vtext(t,e,a,i="50px pixel"){return this.text(t,e.x,e.y,a,i),this}text(t,e,a,i,r="50px pixel"){let s=this.context;return s.font=r,s.fillText(t,e,a,i),this}push(){return this.context.save(),this}pop(){return this.context.restore(),this}path(t){this.context.beginPath();for(let e=0;e<t.length;e+=2){let a=t[e],i=t[e+1];0==e?this.context.moveTo(a,i):this.context.lineTo(a,i)}return this}vpath(t){this.context.beginPath();let e=0;for(let a of t)0==e++?this.context.moveTo(a.x,a.y):this.context.lineTo(a.x,a.y);return this}clip(){return this.context.clip(),this}gradient(t,e,a){let i=this.context.createLinearGradient(t.x,t.y,e.x,e.y);for(let[t,e]of a)i.addColorStop(t,e.toString());return i}}},function(t,e,a){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(a(1)),n=r(a(7)),l=r(a(3)),o=r(a(4)),h=a(0);e.default=class extends l.default{constructor(t,e,a,i,r,l,h,u){super(s.vector(a,i),0,0),this.types=[o.default.Attack1,o.default.Heal1],this.capacity=e,this.spread=s.vector(r,l),this.isHand=h,u&&(this.types=u);let d=[];for(let e=0;e<t;e++){let t=s.vector(a+r*e,i+l*e),o=this.types[Math.floor(Math.random()*this.types.length)],h=new n.default(t,o);d.push(h)}this.cards=d,this.layer=10}get length(){return this.cards.length}remove(t){let e=this.cards.indexOf(t);this.cards.splice(e,1)}insertAt(t,e){if(0==this.length)return void this.cards.push(t);let a=this.cards[e];this.cards[e]=t,this.cards.push(a)}insertAtRandom(t){let e=Math.floor(Math.random()*this.length);this.insertAt(t,e)}transferCard(t,e=1){let a=this.cards.pop();a&&(a.dealDelay=e,t.cards.push(a))}cardPosition(t){let e=this.cards.indexOf(t);return this.position.add(this.spread.multiply(e))}onRender(t){if(!this.isHand&&this.length>=0){let e=this.cards[this.length-1];if(!e)return;t.vimage(h.getImage("cards/Blank"),s.default.ZERO,e.dimensions),t.fillStyle("#a39081").text(this.length.toString(),0,e.height/2,e.width,"30px pixel")}}onBuildScene(t){let e=0,a=this.isHand?1:-1;for(let i of this.cards)i.deck=this,i.layer=e++*a,i.grabbed&&(i.layer=100),t.add(i)}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(2)),s=i(a(24)),n=i(a(26)),l=t=>t.position.x,o=t=>t.position.x+t.dimensions.x,h=t=>t.position.y,u=t=>t.position.y+t.dimensions.y;function d(t,e,a){return a>Math.min(t,e)&&a<Math.max(t,e)}function c(t,e,a,i){return d(t,e,a)||d(t,e,i)}e.boxContains=function(t,e){let a=d(l(t),o(t),e.x),i=d(h(t),u(t),e.y);return a&&i},e.boxOverlaps=function(t,e){let a=c(l(t),o(t),l(e),o(e)),i=c(h(t),u(t),h(e),u(e));return a&&i},e.contains=d,e.overlaps=c,e.collisionInfo=function(t,e){let a=e.velocity.subtract(t.velocity),i=new n.default(r.default.ZERO,a),l=s.default(a=>t.support(a).subtract(e.support(a.negate())),a);if(null==l)return null;let o=l.rayCast(i);if(o<=0)return null;let h=l.leftNormal.unit(),u=r.default.polar(.1,1),d=h.complexProduct(u),c=h.complexQuotient(u);return{time:o,normal:h,contact:{a:{high:t.support(d),low:t.support(c)},b:{high:e.support(d.negate()),low:e.support(c.negate())}}}}},function(t,e,a){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e},r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const s=i(a(2)),n=r(a(12));window.addEventListener("mousemove",t=>{l.mouse=s.vector(t.x,t.y)}),window.addEventListener("keydown",t=>l.buttons[t.key]=!0),window.addEventListener("keyup",t=>l.buttons[t.key]=!1),window.addEventListener("mousedown",t=>l.buttons["Mouse"+t.button]=!0),window.addEventListener("mouseup",t=>l.buttons["Mouse"+t.button]=!1);class l{static mouseScreenPosition(t){t instanceof n.default&&(t=t.canvas);let e=t.getBoundingClientRect();return l.mouse.addXY(-e.left,-e.top)}}e.default=l,l.mouse=s.default.ZERO,l.buttons={}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=a(0),n=i(a(3)),l=i(a(8)),o=r(a(1)),h=i(a(7)),u=i(a(4)),d=i(a(29)),c=i(a(10)),f=i(a(9)),p=i(a(5)),m=i(a(6)),y=a(11);e.default=class extends n.default{constructor(t,e){super(o.vector(t,e),69,100),this.preview=0,this.layer=50,this.ingredients=[],this.multiplier=1,this.base=new h.default(this.position,u.default.Volatile),this.sprite=new l.default(s.getImage("Melter")).setSource({x:0,y:0,w:100,h:100}).setDimensions(o.vector(110,100))}get products(){let t=d.default.getProduct(this.ingredients),e=[];for(let a=0;a<this.multiplier*t.craftQuantity;a++)e.push(new h.default(this.base.position,t));return e}get potentialProduct(){let t=f.default.instance;if(!t.grabbing)return;let e=this.ingredients.slice();e.push(t.grabbing.type);let a=d.default.getProduct(e);return new h.default(this.base.position,a)}melt(t){this.ingredients.push(t.type),y.playSound("bubble.wav",{volume:.5})}drawProduct(t,e,a){t.push(),t.alpha(.8*this.preview);let i=performance.now(),r=.1*Math.sin(i/400),s=o.default.lissajous(.002*i,7,13,10);t.transform(new c.default(this.dimensions.half.addY(-150).add(s),r,o.default.ONE,a.dimensions.half.addY(20))).shadow(40,m.default.cornflowerblue),a.onRender(t),t.pop()}onRender(t,e){let{sprite:a}=this,i=e.mousePosition,r=0;this.contains(i)&&(r=1),this.preview=p.default.lerp(this.preview,r,.1),this.products.forEach(a=>{this.drawProduct(t,e,this.potentialProduct||a)});let s=o.vector(32,45);a.draw(t,s.x,s.y,!0)}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var a in t)Object.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});const s=i(a(3)),n=r(a(1)),l=i(a(5)),o=i(a(6)),h=i(a(13)),u=i(a(7)),d=i(a(4));e.default=class extends s.default{constructor(t,e,a,i,r){super(t,100,140),this.dizzyTime=0,this.dizziness=0,this.recentDamage=0,this.damageTime=0,this.pHealth=10,this.damage=10,this.deck=new h.default(0,0,0,0,10,0,!1),this.hand=new u.default(new n.default(0,0),d.default.Heal1),this.layer=-50,this.maxHealth=e,this.pHealth=e,this.damage=r,this.heal=2,this.main=!1,this.animator=a,i&&(this.hand=new u.default(new n.default(0,0),i[0]),this.deck=new h.default(i.length,0,this.position.x,this.position.y,0,0,!1,i),i.forEach(t=>{this.deck.insertAtRandom(new u.default(this.position,t))}))}get randomCard(){let t=Math.floor(Math.random()*this.deck.length);console.log("deck:",this.deck),console.log("index:",t);let e=this.deck.cards[t];return console.log("Card:",e.type),e}setNewHand(){this.hand=this.randomCard}get health(){return this.pHealth}set health(t){let e=t-this.pHealth;this.pHealth=l.default.clamp(t,0,this.maxHealth),e<0&&this.onDamage(-e)}onDamage(t){this.recentDamage+=t,this.recentDamage=Math.min(this.maxHealth-this.health,this.recentDamage),this.damageTime+=2*t}onUpdate(){this.recentDamage=Math.max(0,this.recentDamage-.15),this.damageTime=Math.max(0,this.damageTime-1),this.dizzyTime=Math.max(0,this.dizzyTime-1),this.health>this.maxHealth&&(this.health=this.maxHealth),0==this.dizzyTime&&(this.dizziness=0)}statDecay(){0!=this.damage&&(this.damage-=Math.sign(this.damage)),0!==this.heal&&(this.heal+=-1*Math.sign(this.heal))}UseHand(t,e){!this.main&&this.health>0&&(this.hand.type.apply(t,e),this.setNewHand())}onEndTurn(){this.health>0&&(this.health+=this.heal),this.statDecay()}onRender(t,e){if(t.vtranslate(n.default.lissajous(10*this.damageTime,7,13,Math.sqrt(this.damageTime))),this.animator){let{width:e,height:a}=this;t.push().translate(e/2,a/2),this.animator.onRender(t),t.pop()}else this.drawBasic(t);this.drawHealthBar(t),this.drawIntent(t)}drawBasic(t){t.vrect(n.default.ZERO,this.dimensions).fillStyle(o.default.magenta).fill()}drawHealthBar(t){let e=this.width/this.maxHealth,a=this.health*e,i=n.vector(0,this.height),r=i.addXY(a/3-15,18),s=this.recentDamage*e;t.vrect(i,n.vector(this.width,20)).fillStyle(o.default.black).fill(),t.vrect(i,n.vector(a,20)).fillStyle(o.default.red).fill(),t.vrect(i.addX(a),n.vector(s,20)).fillStyle(o.default.orange).fill(),t.fillStyle("white").text(this.health+"/"+this.maxHealth,r.x,r.y,60,"20px pixel")}drawIntent(t){let e=this.main?-100:100;t.fillStyle("red").text("Str:"+this.damage,e,25,80,"25px pixel"),this.health>0&&t.fillStyle("green").text("Res:"+this.heal,e,45,80,"25px pixel"),this.main||t.fillStyle("rgb(200, 0, 200)").text(this.hand.type.name,0,-30,100,"25px pixel")}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(8)),s=a(2);e.default=class{constructor(t){this.scale=1,this.image=t.image,this.frameWidth=t.frameWidth,this.scale=t.scale||this.scale,this._center=t.center||this._center}setScale(t){return this.scale=t,this}setCenter(t){return this._center=t,this}get center(){return this._center?this._center.multiply(this.scale):this.spriteDimensions.half()}get frameCount(){return Math.floor(this.image.width/this.frameWidth)}frame(t){return t%=this.frameCount,new r.default(this.image).setSource({x:this.frameWidth*t,y:0,w:this.frameWidth,h:this.image.height}).setDimensions(this.spriteDimensions).setCenter(this.center)}frameAtPercent(t){return this.frame(Math.floor(t*this.frameCount))}get frameDimensions(){return s.vector(this.frameWidth,this.image.height)}get spriteDimensions(){return this.frameDimensions.multiply(this.scale)}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=a(20);e.default=class{constructor(t,e=i.GameClock){this.sheet=t,this.clock=e}getPercent(t){return(t-this.startTime)/this.playTime}getSprite(t){let{startTime:e,playTime:a,sheet:i}=this;return e&&t<e+a?i.frameAtPercent(this.getPercent(t)):(this.stop(),i.frame(0))}play(t){this.startTime=this.clock.time,this.playTime=t}stop(){this.playTime=void 0,this.startTime=void 0}onRender(t){this.getSprite(this.clock.time).draw(t,0,0,!0)}get playing(){return null==this.playTime}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=50;class r{constructor(){this.lastTick=performance.now(),this.paused=!1,this._time=0,this._dt=0}get time(){return this._time}get dt(){return this._dt}tick(){let t=performance.now(),e=t-this.lastTick,a=Math.min(e,i);this.lastTick=t,this.paused||(this._dt=a,this._time+=a)}pause(){this.paused=!0}unpause(){this.paused=!1}}e.default=r,e.GameClock=new r,window.GameClock=e.GameClock},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(9));a(37).startGameLoop(r.default)},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(23));function s(t){return t.match(/[A-Za-z_][a-z0-9_]+/g)}e.frozen=function(t){return Object.freeze(t)},e.renameField=function(t,e,a){t.hasOwnProperty(e)&&(t[a]=t[e],delete t[e])},e.splitCamel=s,e.camelToDashes=function(t){return(s(t)||[]).join("-").toLowerCase()},e.memoize=function(t){let e={};return a=>{let i=e[a];if(void 0!==i)return i;let r=t(a);return e[a]=r,r}},e.fitBox=function(t,e){let a=e.dimensions.x/t.dimensions.x,i=e.dimensions.y/t.dimensions.y,s=Math.min(a,i),n=t.dimensions.multiply(s),l=e.dimensions.subtract(n).half();return new r.default(n,e.position.add(l))},e.argmax=function(t,e){let a=e(t[0]),i=0;for(let r=0;r<t.length;r++){let s=e(t[r]);s>a&&(a=s,i=r)}return{best:a,bestIndex:i,bestArg:t[i]}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(2));e.default=class{constructor(t,e=r.default.ZERO){this.dimensions=t,this.position=e}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(25));e.default=function(t,e,a=100){let i=t(e.rightNormal()),s=t(e.leftNormal());if(i.dot(e.rightNormal())<0)return null;if(s.dot(e.leftNormal())<0)return null;let n=0;for(;;){let l=s.subtract(i),o=i.negate(),h=t(l.normalOnSide(o));if(++n==a||h.equivalent(i)||h.equivalent(s))return new r.default(i,s);h.dot(e.rightNormal())>0?i=h:s=h}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.a=t,this.b=e}get heading(){return this.b.subtract(this.a)}get leftNormal(){return this.heading.leftNormal()}rayCast(t){let{a:e,b:a}=this,i=e.subtract(t.point),r=a.subtract(e).leftNormal();return i.dot(r)/t.heading.dot(r)}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.point=t,this.heading=e}pointAt(t){return this.point.add(this.heading.multiply(t))}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(2));class s{constructor(t=0,e=0,a=0,i=0,r=0,s=0){this.xx=0,this.xy=0,this.yx=0,this.yy=0,this.dx=0,this.dy=0,this.xx=t,this.xy=e,this.yx=a,this.yy=i,this.dx=r,this.dy=s}multiplyVector(t){return new r.default(this.xx*t.x+this.xy*t.y,this.yx*t.x+this.yy*t.y)}multiplyPoint(t){return new r.default(this.xx*t.x+this.xy*t.y+this.dx,this.yx*t.x+this.yy*t.y+this.dy)}multiplyMatrix(t){let e=this;return new s(e.xx*t.xx+e.xy*t.yx,e.xx*t.xy+e.xy*t.yy,e.yx*t.xx+e.yy*t.yx,e.yx*t.xy+e.yy*t.yy,e.xx*t.dx+e.xy*t.dy+e.dx,e.yx*t.dx+e.yy*t.dy+e.dy)}static translation(t=0,e=0){return new s(1,0,0,1,t,e)}static rotation(t=0){let e=Math.sin(t),a=Math.cos(t);return new s(a,-e,e,a,0,0)}static scale(t=1,e=1){return new s(t,0,0,e,0,0)}}e.default=s},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=a(11),s=a(0),n=i(a(12)),l=i(a(1)),o=i(a(7));e.default=class{constructor({imageName:t="",damage:e=0,craftQuanity:a=1,onApply:i=((t,e)=>{})}){this.damage=0,this.craftQuantity=1,this.imageName=t,this.damage=e,this.onApply=i,this.craftQuantity=1}apply(t,e){0!==this.damage&&(t.health-=this.damage+e.damage),null!=this.onApply&&this.onApply(t,e),r.playSound(o.default.randomFlipSound(),{volume:.25})}get imagePath(){return"cards/"+(this.imageName||this.name)}get image(){if(this.generatedImage)return this.generatedImage;let t=s.getImage("cards/Blank"),e=s.getImage(this.imagePath);if(!t.complete||!e.complete||!s.isFontLoaded("pixel"))return t;let a=new OffscreenCanvas(0,0),i=new n.default(a);i.resize(o.default.dimensions.x,o.default.dimensions.y,2),i.smooth(!1),i.vimage(t,l.default.ZERO),i.image(e,o.default.dimensions.x/2-e.width/2,o.default.upperSectionHeight/2-e.height/2);let r=o.default.dimensions.x/12,h=o.default.dimensions.x-2*r,u=(o.default.dimensions.y-o.default.upperSectionHeight-16)/2,d=o.default.upperSectionHeight+16+u-2;return i.fillStyle("#D2B9A6").text(this.name.toUpperCase(),r,d,h,"16px pixel"),this.generatedImage=a.transferToImageBitmap(),this.generatedImage}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(4));class s{static getKey(t){return t.map(t=>t.name).sort().join("-")}static addRecipe(t,e){let a=s.getKey(e);s.recipes[a]=t}static getProduct(t){let e=s.getKey(t);return s.recipes[e]||r.default.Volatile}}s.recipes={};{let t=s.addRecipe,{Attack1:e,Attack2:a,Acid:i,Molotov:n,Poison:l,Heal1:o,Heal2:h,Karma:u,Volatile:d,Dread:c,Blood:f,Leeches:p,Infusion:m,Meds:y,Dissect:g,Pact:x,Roids:w,Chaos:b,Bash:v,Charma:_,Smolder:M,FireBreath:P,Fortify:S,LifeSteal:k,Bite:T,SoulStare:O,Chaol:A,PlaneShift:j}=r.default;t(j,[u,b,x]),t(e,[d,d]),t(a,[e,e]),t(v,[a,a]),t(i,[e,e,e]),t(i,[e,a]),t(l,[d,o]),t(n,[l,e]),t(f,[p,o]),t(w,[i,f]),t(x,[f,u]),t(g,[p,u]),t(P,[e,e,e,e,e]),t(o,[d]),t(h,[o,o]),t(u,[o,o,o]),t(c,[e,d]),t(m,[f,o]),t(_,[b,u]),t(M,[e,e,e,e]),t(S,[o,o,o,o,o]),t(A,[h,b]),t(b,[d,d,d]),t(y,[d,h]),t(p,[e,o]),t(O,[b,f]),t(k,[a,h]),t(T,[a,o])}e.default=s},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(10)),s=i(a(15)),n=a(14),l=(t,e)=>t.layer-e.layer;e.default=class{constructor(t,e,a=[]){this.cameraTransform=new r.default,this.objects=[],this.canvas=t,this.cameraTransform=e;for(let t of a)this.add(t)}screneToWorldPoint(t){return this.cameraTransform.transformPoint(t)}screneToWorldVector(t){return this.cameraTransform.transformVector(t)}worldToScrenePoint(t){return this.cameraTransform.inverseTransformPoint(t)}worldToScreneVector(t){return this.cameraTransform.inverseTransformVector(t)}get mousePosition(){return this.screneToWorldPoint(s.default.mouseScreenPosition(this.canvas))}render(){let{canvas:t}=this;t.push(),t.inverseTransform(this.cameraTransform),this.objects.sort(l);for(let e of this.objects)t.push(),t.transform(e.transform),e.onRender(t,this),t.pop();t.pop()}update(){for(let t of this.objects)t.onUpdate(this)}add(t){this.objects.push(t),t.onBuildScene(this)}objectsInBox(t,e=(()=>!0)){let a=[];for(let i of this.objects)n.boxOverlaps(t,i)&&e(i)&&a.push(i);return a}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});let i=new Set;e.scheduleTask=function(t,e,a){return!i.has(t)&&(i.add(t),setTimeout(()=>{try{a()}catch(t){throw t}finally{i.delete(t)}},e),!0)}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(3)),s=a(6),n=a(0),l=i(a(9));e.default=class extends r.default{constructor(){super(...arguments),this.layer=-100}onRender(t){let{enemyCount:e}=l.default.instance;t.rect(0,150,t.dimensions.x,t.dimensions.y).fillStyle(s.rgb(100,100,100)).fill(),t.image(n.getImage("Ground"),0,145,this.dimensions.x,200),t.image(n.getImage("BackGroundMid"),0,0,t.dimensions.x,150),t.fillStyle(s.rgb(255,255,255)).text("Level "+e,t.dimensions.x/2-45,30,100,"40px pixel")}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=i(a(18)),s=a(0),n=a(1),l=i(a(17)),o=i(a(19)),h=i(a(4));class u{constructor(t,e,a,i){this.strength=100,this.health=t,this.strength=e,this.cardTypes=a,this.spriteSheet=i}create(){return new l.default(n.vector(520,80),this.health,new o.default(this.spriteSheet),this.cardTypes,this.strength)}}let{Attack1:d,Bite:c,Fortify:f,DamageBuff:p,HeavyAttack:m,MaxHealthBuff:y,LifeSteal:g,Cower:x,Smolder:w,FireBreath:b,SoulStare:v,PuppyEyes:_,Karma:M,Blood:P,Pact:S,Roids:k,Poison:T,Meds:O,Molotov:A,Dread:j}=h.default;const D=[new u(15,-3,[x,x,x,x,x,x,x,x,d],new r.default({image:s.getImage("Chadwick"),frameWidth:500,scale:.25})),new u(65,10,[w,w,c],new r.default({image:s.getImage("Archlizard"),center:n.vector(48,21),frameWidth:100,scale:2.4})),new u(45,15,[w,c,m],new r.default({image:s.getImage("BoneDragon"),center:n.vector(30,48),frameWidth:84,scale:1.4})),new u(40,5,[y,p,p,P,d],new r.default({image:s.getImage("Noodle"),frameWidth:100,scale:1.4})),new u(20,0,[v,v,v,v,v,S],new r.default({image:s.getImage("EyeSlug"),frameWidth:100,scale:.25})),new u(50,15,[p,p,d,T,A],new r.default({image:s.getImage("TribalTimmy"),frameWidth:100,scale:1.5})),new u(60,5,[v,g,g,P,g,g,M],new r.default({image:s.getImage("OcculentAustin"),frameWidth:100,scale:2.3})),new u(35,5,[f,p,d,j],new r.default({image:s.getImage("MaskedMaggot"),frameWidth:100,scale:1.5})),new u(45,5,[v,f,p],new r.default({image:s.getImage("Headsman"),frameWidth:88,scale:2.2})),new u(30,5,[f,g,g,j,T,T],new r.default({image:s.getImage("Pterry"),frameWidth:100,scale:2})),new u(999,20,[v,f,v],new r.default({image:s.getImage("EyeDemon"),frameWidth:101,scale:2}))];e.getEnemy=function(t){return D[t].create()},e.newEncounter=function(t){let e=D[Math.floor((D.length-1)*Math.random())].create();return e.damage+=t,e}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=a(0),s=i(a(3)),n=i(a(8)),l=a(1);e.default=class extends s.default{constructor(t,e){super(l.vector(t,e),100,400),this.preview=0,this.layer=60,this.sprite=new n.default(r.getImage("Ledger")).setSource({x:0,y:0,w:100,h:100}).setDimensions(l.vector(100,60))}onRender(t,e){let{sprite:a}=this,i=e.mousePosition;if(this.contains(i),a){let e=l.vector(32,45);a.draw(t,e.x,e.y,!0),t.fillStyle("rgba( 0, 0, 0, 0.9 )"),t.text("Menu",2,50,60,"20px pixel")}}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=a(0),s=i(a(3)),n=i(a(8)),l=a(1);e.default=class extends s.default{constructor(t,e,a,i){super(l.vector(t,e),a,i),this.layer=50,this.equipment=[],this.sprite=new n.default(r.getImage("Table")).setSource({x:0,y:0,w:100,h:100}).setDimensions(l.vector(a,i))}onRender(t,e){let{sprite:a}=this,i=(e.mousePosition,l.vector(32,45));a.draw(t,i.x,i.y,!0)}}},function(t,e,a){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const r=a(0),s=i(a(3)),n=i(a(8)),l=a(1);e.default=class extends s.default{constructor(t,e){super(l.vector(t,e),100,400),this.layer=60,this.sprite=new n.default(r.getImage("Ledger")).setSource({x:0,y:0,w:100,h:100}).setDimensions(l.vector(100,60))}onRender(t,e){let{sprite:a}=this,i=e.mousePosition,r=l.vector(32,45);if(a.draw(t,r.x,r.y,!0),t.fillStyle("rgba( 0, 0, 0, 0.9 )"),t.text("Manual",2,50,60,"20px pixel"),this.contains(i)){let e="\n            \nCombine Cards\n            \nIn the Boiler\n            \nTo craft new Cards",a=55,i=35,r=a.toString()+"px pixel",s=e.split("\n");t.fillStyle("rgba(222, 194, 128, 0.8)"),t.rect(-500,-500,1e3,1e3).fill();for(let e=0;e<s.length;e++)t.fillStyle("white"),t.text(s[e],-450,(-s.length+e)*a,s[e].length*i,r),t.fillStyle("blue"),t.text(s[e],-445,(-s.length+e)*a+5,s[e].length*i,r)}}}},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=a(20);e.startGameLoop=function(t){window.onload=()=>{let e=new t;!function t(){i.GameClock.tick(),e.update(),requestAnimationFrame(t)}()}}}]);